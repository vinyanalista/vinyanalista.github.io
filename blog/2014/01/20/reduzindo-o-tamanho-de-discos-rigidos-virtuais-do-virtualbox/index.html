<!DOCTYPE html>
<html lang="pt" xmlns:addthis="http://www.addthis.com/help/api-spec">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    
    
        <!--
            redirect users to the https version of the website.
            but: only check when on the production domain, as set in _config.yml.
        -->
        <script type="text/javascript">
            if (("vinyanalista.github.io" == window.location.host) && (window.location.protocol != "https:"))
                window.location = window.location.toString().replace(/^http:/, "https:");
        </script>
    
    
    <meta name="author" content="Antônio Vinícius Menezes Medeiros">
    <meta name="description" content="É verdade que quando criamos um disco rígido virtual dinamicamente alocado no VirtualBox, ele cresce à medida em que arquivos são gravados. No entanto, seu tamanho não diminui à medida em que excluímos arquivos. Veja agora como é possível reduzir discos rígidos desse tipo no VirtualBox.">
    <link rel="canonical" href="https://vinyanalista.github.io/blog/2014/01/20/reduzindo-o-tamanho-de-discos-rigidos-virtuais-do-virtualbox/">
    <link rel="alternate" type="application/rss+xml" title="Antônio Vinícius" href="https://vinyanalista.github.io/feed.xml" />

    <title>Reduzindo o tamanho de discos rígidos virtuais do VirtualBox - Antônio Vinícius</title>

    <!-- Facebook -->
    <meta property="og:url" content="https://vinyanalista.github.io/blog/2014/01/20/reduzindo-o-tamanho-de-discos-rigidos-virtuais-do-virtualbox/" />
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="Reduzindo o tamanho de discos rígidos virtuais do VirtualBox - Antônio Vinícius" />
    <meta property="og:description" content="É verdade que quando criamos um disco rígido virtual dinamicamente alocado no VirtualBox, ele cresce à medida em que arquivos são gravados. No entanto, seu tamanho não diminui à medida em que excluímos arquivos. Veja agora como é possível reduzir discos rígidos desse tipo no VirtualBox." />
    <meta property="og:image" content="https://vinyanalista.github.io/files/2014/01/virtualbox.png" />
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@vinyanalista" />

    <!-- Favicons (by realfavicongenerator.net) -->
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png?v=2">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png?v=2">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png?v=2">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png?v=2">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png?v=2">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png?v=2">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png?v=2">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png?v=2">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png?v=2">
    <link rel="icon" type="image/png" href="/favicon-32x32.png?v=2" sizes="32x32">
    <link rel="icon" type="image/png" href="/favicon-194x194.png?v=2" sizes="194x194">
    <link rel="icon" type="image/png" href="/favicon-96x96.png?v=2" sizes="96x96">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png?v=2" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-16x16.png?v=2" sizes="16x16">
    <link rel="manifest" href="/manifest.json?v=2">
    <link rel="shortcut icon" href="/favicon.ico?v=2">
    <meta name="msapplication-TileColor" content="#2d89ef">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png?v=2">
    <meta name="theme-color" content="#2196f3">
    
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="/lib/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="/lib/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- CSS -->
    <link href="/css/all.min.css" rel="stylesheet">

    <!-- AddThis + Google AdSense + Google Analytics -->
    <script type="text/javascript">
            var addthis_share = {
                url: "https://vinyanalista.github.io/blog/2014/01/20/reduzindo-o-tamanho-de-discos-rigidos-virtuais-do-virtualbox/",
                title: document.title,
                description: "É verdade que quando criamos um disco rígido virtual dinamicamente alocado no VirtualBox, ele cresce à medida em que arquivos são gravados. No entanto, seu tamanho não diminui à medida em que excluímos arquivos. Veja agora como é possível reduzir discos rígidos desse tipo no VirtualBox."
            },
            adsense_editor_id = "ca-pub-5193467168351289",
            adsense_ad_units = [
                "4511719452",
                "5988452654",
                "7465185857"
            ],
            analytics_property_id = "UA-65333685-1",
            page_url = "https://vinyanalista.github.io/blog/2014/01/20/reduzindo-o-tamanho-de-discos-rigidos-virtuais-do-virtualbox/",
            page_title = "Reduzindo o tamanho de discos rígidos virtuais do VirtualBox - Antônio Vinícius";
    </script>
    <script async src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4f7774466af48b4f"></script>
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    
    <!-- jQuery + Bootstrap + comum -->
    <script src="/js/all.min.js"></script>
</head>
    <body itemscope itemtype="http://schema.org/BlogPosting">
        <!-- Fixed navbar -->
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Exibir/esconder</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://vinyanalista.github.io">Antônio Vinícius</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li>
                    <a href="/">Blog</a>
                </li>
                <li>
                    <a href="/blog/category/trabalhos/">Trabalhos</a>
                </li>
                <li>
                    <a href="http://lattes.cnpq.br/2162371468280338">Currículo</a>
                </li>
            </ul>
            
            <form action="/busca/" class="navbar-form navbar-right" method="get" role="search">
                <div class="input-group" id="grupo_pesquisar">
                    <input type="text" class="form-control" name="q" placeholder="Pesquisar" />
                    <div class="input-group-btn">
                        <button class="btn btn-default" type="submit">
                            <span class="glyphicon glyphicon-search"></span>
                        </button>
                    </div>
                </div>
            </form>
            
        </div><!-- #navbar -->
    </div><!-- .container -->
</nav>
        <div class="container">
            <div class="row">
                <div class='col-sm-8' id='blog-principal'>
                    <div class="blog-post panel panel-default">
    <div class="panel-heading">
        <h2 class="blog-post-titulo" itemprop="headline name">
            <a href="/blog/2014/01/20/reduzindo-o-tamanho-de-discos-rigidos-virtuais-do-virtualbox/" itemprop="url">Reduzindo o tamanho de discos rígidos virtuais do VirtualBox</a>
        </h2>
        <div class="blog-post-meta row">
            <div class='col-sm-6'>
                <div class='blog-post-data'>
                    <p itemprop="datePublished" content="2014-01-20">
                        20 de
                        
                        Janeiro
                        
                        de 2014
                    </p>
                </div>
            </div>
            <div class='col-sm-6'>
                <div class='blog-post-redes-sociais'>
                    <!-- AddThis Button BEGIN -->
                    <div class="addthis_toolbox addthis_default_style">
                        <a class="addthis_button_facebook"></a>
                        <a class="addthis_button_twitter" data-via="vinyanalista"></a>
                        <a class="addthis_button_google_plusone_share"></a>
                        <a class="addthis_button_favorites"></a>
                        <a class="addthis_button_compact"></a>
                        <a class="addthis_counter addthis_bubble_style"></a>
                    </div>
                    <!-- AddThis Button END -->
                </div>
            </div>
        </div>
    </div>
    <div class="blog-post-conteudo panel-body">
        <div itemprop="articleBody">
            <p>É verdade que quando criamos um disco rígido virtual dinamicamente alocado no <a href="http://www.virtualbox.org/">VirtualBox</a>, ele cresce à medida em que arquivos são gravados. No entanto, seu tamanho não diminui à medida em que excluímos arquivos. Veja agora como é possível reduzir discos rígidos desse tipo no VirtualBox.</p>

<!--more-->

<p class='text-center'>
    <a href='/files/2014/01/virtualbox.png' title=''>
        <img src='/files/2014/01/virtualbox.png' alt='' class='img-responsive img-thumbnail'>
    </a>
    
</p>

<p>Primeiro, é necessário executar um utilitário na <strong>máquina virtual</strong> (<em>guest</em>), que vai transformar todo o espaço livre em <em>bits</em> zero no disco rígido virtual. Se sua máquina virtual roda Linux, esse utilitário é o <strong>zerofree</strong>, se roda Windows, há o <strong>SDelete</strong>.</p>

<p>A <a href="http://www.thelinuxdaily.com/2010/02/shrinking-a-dynamic-virtualbox-disk-image/">página na qual descobri o zerofree</a> recomenda reiniciar o Linux (da máquina virtual) no modo de recuperação (<em>safe mode</em> ou <em>recovery mode</em>) para executar o <strong>zerofree</strong>. Pra simplificar a vida, eu prefiro inicializar a máquina virtual utilizando um LiveCD.</p>

<p>Se você tiver um LiveCD do Ubuntu, o <strong>zerofree</strong> pode ser instalado nele via:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text"># apt-get install zerofree
</code></pre></div>
<p>O openSUSE também possui o <strong>zerofree</strong> nos repositórios oficiais da distribuição:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text"># zypper in zerofree
</code></pre></div>
<p>Se for usar o LiveCD de outra distribuição, pesquise na Internet como obter o <strong>zerofree</strong> para a sua distribuição.</p>

<p>Se você não souber identificar o disco rígido, o utilitário <strong>fdisk</strong> pode dar uma pista:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text"># fdisk -l
</code></pre></div>
<p>No meu caso, vou compactar o <strong>/dev/sda1</strong>.</p>

<p>Montamos o disco rígido como somente leitura em uma pasta temporária e executamos o <strong>zerofree</strong> nele:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text"># mkdir /mnt/tmp
# mount -o ro /dev/sda1 /mnt/tmp
# zerofree /dev/sda1
</code></pre></div>
<p>Se sua máquina virtual roda Windows, você deve baixar o <a href="http://technet.microsoft.com/en-us/sysinternals/bb897443.aspx">SDelete</a>, abrir o Prompt de Comando, ir até a pasta onde o <strong>SDelete</strong> foi baixado e executar o comando:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&gt; sdelete -c C:/
</code></pre></div>
<p>Onde <strong>C</strong> é a letra da unidade cujo espaço livre deseja-se converter em <strong>bits</strong> zero.</p>

<p>Após executar o <strong>zerofree</strong> ou o <strong>SDelete</strong>, devemos voltar à <strong>máquina real</strong> (<em>host</em>) e executar o utilitário do VirtualBox que vai de fato compactar o disco rígido virtual, reduzindo seu tamanho fisicamente.</p>

<p>Se sua máquina real roda Linux:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$ VBoxManage modifyhd /caminho/para/o/hd/virtual.vdi --compact
</code></pre></div>
<p>Se sua máquina real roda Windows, provavelmente você terá que ir até a pasta do VirtualBox para executar o comando:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&gt; cd &quot;C:\Program Files\Oracle\VirtualBox&quot;
&gt; VBoxManage modifyhd &quot;C:\caminho\para\o\hd\virtual.vdi&quot; --compact
</code></pre></div>
<p>Foi assim que hoje consegui reduzir um disco rígido virtual de 6,5GB para 5GB. Foi uma redução pequena, mas isso varia de um caso para outro. O autor <a href="http://www.maketecheasier.com/shrink-your-virtualbox-vm">desse post no Make Tech Easier</a> conseguiu uma redução de 45% no espaço que o disco rígido virtual ocupava (de 10GB para 5,5GB).</p>

<p>Abraço a todos e até mais!</p>

<h3>Referências</h3>

<ul>
<li><a href="http://www.thelinuxdaily.com/2010/02/shrinking-a-dynamic-virtualbox-disk-image/">Shrinking a Dynamic VirtualBox Disk Image | The Linux Daily</a></li>
<li><a href="http://www.maketecheasier.com/shrink-your-virtualbox-vm">How To Shrink Your Virtualbox VM And Free Up Space For Your Hard Disk – Make Tech Easier</a></li>
</ul>

        </div>
        <div class="gap"></div>
        
        <h3>Gostou? Então compartilha!</h3>
        <!-- AddThis Button BEGIN -->
        <div class="addthis_toolbox addthis_default_style addthis_32x32_style gap">
            <a class="addthis_button_facebook"></a>
            <a class="addthis_button_twitter"></a>
            <a class="addthis_button_google_plusone_share"></a>
            <a class="addthis_button_email"></a>
            <a class="addthis_button_favorites"></a>
            <a class="addthis addthis_button_print"></a>
            <a class="addthis_button_pdfonline"></a>
            <a class="addthis_button_compact"></a>
            <a class="addthis_counter addthis_bubble_style"></a>
        </div>
        <!-- AddThis Button END -->
        
        <h3>Comentários</h3>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES * * */
            var disqus_shortname = 'vinyanalista';
            var disqus_url = 'https://vinyanalista.github.io/blog/2014/01/20/reduzindo-o-tamanho-de-discos-rigidos-virtuais-do-virtualbox/';

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>
            <p><a href="http://www.enable-javascript.com/pt/" target="_blank">Habilite o JavaScript</a> para ver os <a href="https://disqus.com/?ref_noscript" rel="nofollow">comentários providos pelo Disqus</a>.</p>
        </noscript>
    </div><!-- .blog-post-conteudo -->
</div><!-- .blog-post -->
                </div><!-- #blog-principal -->
                <div class="col-sm-4" id="blog-lateral">
                    <div class="panel panel-default" id='sobre'>
    <div itemprop="author" itemscope itemtype="http://schema.org/Person">
        <div class="panel-heading">
            <h4>Sobre mim</h4>
        </div>
        <div class="panel-body">
            <p class='text-center'>
                <a href='https://secure.gravatar.com/avatar/5415f4267b44aa9f51b6f89ac4d1656b' title='Antônio Vinícius Menezes Medeiros'>
                    <img src='https://secure.gravatar.com/avatar/5415f4267b44aa9f51b6f89ac4d1656b' alt='Antônio Vinícius Menezes Medeiros' class='avatar img-responsive img-thumbnail'>
                </a>
            </p>
            <p class='text-center' itemprop="name">
                <strong>Antônio Vinícius Menezes Medeiros</strong>
            </p>
            <p class='text-center'>
                <a href='http://lattes.cnpq.br/2162371468280338' title='Currículo Lattes' itemprop='sameAs'>
                    <img src='/img/curriculo_lattes.png' alt='Currículo Lattes' class='img-responsive lattes'>
                </a>
            </p>
            <link itemprop="url" href="https://vinyanalista.github.io">
            <!-- AddThis Follow BEGIN -->
            <div class="addthis_toolbox addthis_32x32_style addthis_default_style center-block">
                <a class="addthis_button_facebook_follow" addthis:userid="pages/vinyanalistacombr/1604841683119097" itemprop="sameAs"></a>
                <a class="addthis_button_twitter_follow" addthis:userid="vinyanalista" itemprop="sameAs"></a>
                <a class="addthis_button_linkedin_follow" addthis:userid="vinyanalista" itemprop="sameAs"></a>
                <a class="addthis_button_google_follow" addthis:userid="112036205302761713933" itemprop="sameAs"></a>
                <a class="addthis_button_youtube_follow" addthis:userid="viniciusifse" itemprop="sameAs"></a>
                <a class="addthis_button_foursquare_follow" addthis:userid="vinyanalista" itemprop="sameAs"></a>
                <a class="addthis_button_github_follow" addthis:userid="vinyanalista" itemprop="sameAs"></a>
            </div>
            <!-- AddThis Follow END -->

            <!-- AdSense -->
            <div class="row">
                <div class="col-xs-12">
                    <ins class="adsbygoogle" id="ad_unit_1" data-ad-format="auto"></ins>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="panel panel-default" id='arquivos'>
    <div class="panel-heading">
        <h4>Arquivos</h4>
    </div>
    <div class="panel-body">
        <ol class="list-unstyled">
            
                
                
                
                    <li>
                        <a href="/blog/2015/09/">
                            
                            Setembro
                            
                            de 2015
                        </a>
                    </li>
                
            
                
                
                
            
                
                
                
                    <li>
                        <a href="/blog/2015/08/">
                            
                            Agosto
                            
                            de 2015
                        </a>
                    </li>
                
            
                
                
                
            
                
                
                
            
                
                
                
            
                
                
                
                    <li>
                        <a href="/blog/2015/07/">
                            
                            Julho
                            
                            de 2015
                        </a>
                    </li>
                
            
                
                
                
                    <li>
                        <a href="/blog/2015/06/">
                            
                            Junho
                            
                            de 2015
                        </a>
                    </li>
                
            
                
                
                
                    <li>
                        <a href="/blog/2014/09/">
                            
                            Setembro
                            
                            de 2014
                        </a>
                    </li>
                
            
                
                
                
                    <li>
                        <a href="/blog/2014/01/">
                            
                            Janeiro
                            
                            de 2014
                        </a>
                    </li>
                
            
                
                
                
                    <li>
                        <a href="/blog/2013/07/">
                            
                            Julho
                            
                            de 2013
                        </a>
                    </li>
                
            
                
                
                
                    <li>
                        <a href="/blog/2012/07/">
                            
                            Julho
                            
                            de 2012
                        </a>
                    </li>
                
            
                
                
                
            
                
                
                
            
                
                
                
            
                
                
                
            
                
                
                
                    <li>
                        <a href="/blog/2012/04/">
                            
                            Abril
                            
                            de 2012
                        </a>
                    </li>
                
            
                
                
                
            
                
                
                
            
                
                
                
            
                
                
                
            
                
                
                
            
                
                
                
            
        </ol>
    </div>
</div>

                </div><!-- #blog-lateral -->
            </div>
        </div>
        <footer class="footer">
    <div class="container text-center">
        Copyright &copy; 2015. <a href='#sobre'>Antônio Vinícius Menezes Medeiros</a>. Todos os direitos reservados. Blog construído sobre o <a href="http://jekyllrb.com/" target='_blank'>Jekyll</a>. Tema <a href="https://bootswatch.com/paper/" target='_blank'>Paper</a>.
    </div>
</footer>

<input type="hidden" id="is_post" value="true">

<meta itemprop="description" content="É verdade que quando criamos um disco rígido virtual dinamicamente alocado no VirtualBox, ele cresce à medida em que arquivos são gravados. No entanto, seu tamanho não diminui à medida em que excluímos arquivos. Veja agora como é possível reduzir discos rígidos desse tipo no VirtualBox.">
<meta itemprop="image" content="https://vinyanalista.github.io/files/2014/01/virtualbox.png">
    </body>
</html>