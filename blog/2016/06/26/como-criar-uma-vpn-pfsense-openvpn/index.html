<!DOCTYPE html>
<html lang="pt" prefix="
    addthis: http://www.addthis.com/help/api-spec
    og: http://ogp.me/ns#
    fb: http://ogp.me/ns/fb#
    article: http://ogp.me/ns/article#">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    
        <script type="text/javascript">
            if (("vinyanalista.github.io" == window.location.host) && (window.location.protocol != "https:")) {
                window.location = window.location.toString().replace(/^http:/, "https:");
            }
        </script>
    

    <title>Como criar uma VPN utilizando pfSense e OpenVPN - Antônio Vinícius</title>
    <meta name="author" content="Antônio Vinícius">
    <meta name="description" content="O pfSense é uma solução de firewall incrível, não só pela quantidade de recursos que oferece, como também pela facilidade para configurá-lo. Ele permite cria...">
    <link rel="canonical" href="https://vinyanalista.github.io/blog/2016/06/26/como-criar-uma-vpn-pfsense-openvpn/">
    <link rel="alternate" type="application/rss+xml" title="Antônio Vinícius" href="https://vinyanalista.github.io/feed.xml" />

    <!-- OpenSearch -->
    <link rel="search" type="application/opensearchdescription+xml" title="Pesquisar em Antônio Vinícius" href="https://vinyanalista.github.io/opensearch.xml" />

    <!-- Open Graph -->
    
        <meta property="article:published_time" content="2016-06-26 01:00:00 -0300"/>
        
            <meta property="article:publisher" content="https://facebook.com/pages/vinyanalistacombr/1604841683119097" />
        
    
    
    
        <meta property="fb:page_id" content="1604841683119097" />
    
    <meta property="og:description" content="O pfSense é uma solução de firewall incrível, não só pela quantidade de recursos que oferece, como também pela facilidade para configurá-lo. Ele permite cria..." />
    
        <meta property="og:image" content="https://vinyanalista.github.io/files/2016/06/pfsense-vpn-01.png" />
    
    <meta property="og:site_name" content="Antônio Vinícius" />
    <meta property="og:title" content="Como criar uma VPN utilizando pfSense e OpenVPN" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://vinyanalista.github.io/blog/2016/06/26/como-criar-uma-vpn-pfsense-openvpn/" />

    <!-- Twitter Cards -->
    <meta name="twitter:card" content="summary" />
    
        <meta name="twitter:site" content="@vinyanalista" />
    

    <!-- Favicons (made with RealFaviconGenerator.net) -->
    <link rel="apple-touch-icon" sizes="180x180" href="https://vinyanalista.github.io/apple-touch-icon.png?v=4">
    <link rel="icon" type="image/png" sizes="32x32" href="https://vinyanalista.github.io/favicon-32x32.png?v=4">
    <link rel="icon" type="image/png" sizes="16x16" href="https://vinyanalista.github.io/favicon-16x16.png?v=4">
    <link rel="manifest" href="https://vinyanalista.github.io/site.webmanifest?v=4">
    <link rel="mask-icon" href="/safari-pinned-tab.svg?v=4" color="#2196f3">
    <link rel="shortcut icon" href="https://vinyanalista.github.io/favicon.ico?v=4">
    <meta name="msapplication-TileColor" content="#2196f3">
    <meta name="theme-color" content="#2196f3">

    <!-- CSS -->
    <!--<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">-->
    <!--<link rel="stylesheet" href="/libs/bootstrap/4.3.1/css/bootstrap.min.css">-->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Material+Icons">
    <!--<link rel="stylesheet" href="https://unpkg.com/bootstrap-material-design@4.1.2/dist/css/bootstrap-material-design.min.css" integrity="sha384-dI6l3oYG+wVvjfdlixt6+FMddrb9+uejLU/wMhQFKklk7RDtSDBfe/XuF1dkcgVV" crossorigin="anonymous">-->
    <link rel="stylesheet" href="/libs/bootstrap-material-design/4.1.2/custom/bootstrap-material-design.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
    <!--<link rel="stylesheet" href="/libs/font-awesome/5.8.2/css/all.min.css">-->
    <link rel="stylesheet" href="/assets/css/syntax.css">
    <link rel="stylesheet" href="/assets/css/main.css">

    <!-- JS -->
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha256-pasqAKBDmFT4eHoN2ndd6lN370kFiGUFyTiUHWhU7k8=" crossorigin="anonymous"></script>
    <!--<script src="/libs/jquery/3.4.1/jquery.slim.min.js"></script>-->
    <script src="https://unpkg.com/popper.js@1.15.0/dist/umd/popper.min.js" integrity="sha384-L2pyEeut/H3mtgCBaUNw7KWzp5n9+4pDQiExs933/5QfaTh8YStYFFkOzSoXjlTb" crossorigin="anonymous"></script>
    <!--<script src="/libs/popper.js/1.15.0/umd/popper.min.js"></script>-->
    <!--<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>-->
    <!--<script src="/libs/bootstrap/4.3.1/js/bootstrap.min.js"></script>-->
    <script src="https://unpkg.com/bootstrap-material-design@4.1.2/dist/js/bootstrap-material-design.min.js" integrity="sha384-aWO+CcMRDQLEvnT8RdnCxWbs4C76Ryoo4pzYpGNW2vlHTHiPA7gpBzIB5nYwYfLg" crossorigin="anonymous"></script>
    <!--<script src="/libs/bootstrap-material-design/4.1.2/js/bootstrap-material-design.min.js"></script>-->
    <script src="/assets/js/main.js"></script>

    
        <!-- Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-65333685-1"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'UA-65333685-1');
        </script>
        <!-- End Google Analytics -->
    

    
        <!-- Google AdSense -->
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    

    
        <!-- AddThis -->
        <script async src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4f7774466af48b4f"></script>
        <script type="text/javascript">
            var addthis_config = {
                data_track_clickback: true,
                data_track_addressbar: true,
                ui_language: 'pt'
            };
            var addthis_share = {
                url: 'https://vinyanalista.github.io/blog/2016/06/26/como-criar-uma-vpn-pfsense-openvpn/',
                title: document.title,
                description: 'O pfSense é uma solução de firewall incrível, não só pela quantidade de recursos que oferece, como também pela facilidade para configurá-lo. Ele permite criar VPNs utilizando, dentre outros protocolos, o OpenVPN, que é livre, versátil e seguro sem abrir mão da praticidade, motivos pelos quais é amplamente difundido.O que é uma VPN?Uma rede privada...'
            };
        </script>
        <!-- End AddThis -->
    
</head>


<body itemscope itemtype="http://schema.org/BlogPosting">

    <!-- Fixed navbar -->
<nav class="navbar navbar-expand-md navbar-dark fixed-top bg-primary">
    <div class="container">
        <a class="navbar-brand" href="/">Antônio Vinícius</a>

        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar" aria-label="Exibir/esconder navegação">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbar">
            <ul class="navbar-nav m-auto">
                <li class="nav-item">
                    <a class="nav-link" href="/">Blog</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/blog/category/trabalhos/">Trabalhos</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="http://lattes.cnpq.br/2162371468280338">Currículo</a>
                </li>
            </ul>
            <form action="/search/" class="form-inline" id="search-form" method="get" role="search">
                
                
                <div class="input-group">
                    <input class="form-control" id="search-field" name="q" placeholder="Pesquisar" type="text" aria-label="Pesquisar">
                    <div class="input-group-append">
                        <button class="btn btn-secondary btn-number" id="search-button" type="submit">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>
                </div>
            </form>
        </div><!--#navbar-->
    </div><!--.container-->
</nav>


    <div class="container">
        <div class="row">
            <div class='col-sm-8'>
                <div class="blog-post card mb-3">
    <header class="card-header">
        <h1 class="blog-post-title" itemprop="headline name">
            <a class="blog-post-link" href="/blog/2016/06/26/como-criar-uma-vpn-pfsense-openvpn/" itemprop="mainEntityOfPage url">
                Como criar uma VPN utilizando pfSense e OpenVPN
            </a>
        </h1>
        <div class="blog-post-meta row">
            <div class='col-sm-6'>
                <p class="blog-post-date" itemprop="datePublished" content="2016-06-26">
                    <a href="/blog/2016/06/26/">
                        26 de
                        
                        Junho
                        
                        de 2016
                    </a>
                </p>
                <meta itemprop="dateModified" content="2016-06-26" />
            </div>
            <div class='col-sm-6'>
                
                    <div class='blog-post-share'>
                        <!-- AddThis Sharing Buttons -->
                        <div class="addthis_toolbox addthis_default_style">
                            <a class="addthis_button_facebook"></a>
                            <a class="addthis_button_twitter" data-via="vinyanalista"></a>
                            <a class="addthis_button_google_plusone_share"></a>
                            <a class="addthis_button_favorites"></a>
                            <a class="addthis_button_compact"></a>
                            <a class="addthis_counter addthis_bubble_style"></a>
                        </div>
                        <!-- AddThis Sharing Buttons End -->
                    </div><!-- .blog-post-share -->
                
            </div><!-- .col-sm-6 -->
        </div><!-- .blog-post-meta -->
    </header>

    <article class="blog-post-content card-body">
        
            <!-- Google AdSense -->
<ins class="adsbygoogle" id="content_ad_unit_1"
    style="display:block"
    data-ad-client="ca-pub-5193467168351289"
    data-ad-slot="5988452654"
    data-ad-format="auto"
    data-full-width-responsive="true"></ins>
<!-- End Google AdSense -->

        

        <div itemprop="articleBody mainEntity">
            <div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2016/06/pfsense-vpn-01.png" title="">
<img src="/files/2016/06/pfsense-vpn-01.png" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>O <a href="https://www.pfsense.org/">pfSense</a> é uma solução de <em>firewall</em> incrível, não só pela quantidade de recursos que oferece, como também pela facilidade para configurá-lo. Ele permite criar VPNs utilizando, dentre outros protocolos, o <a href="https://openvpn.net/">OpenVPN</a>, que é <a href="http://softwarelivre.org/portal/o-que-e">livre</a>, versátil e seguro sem abrir mão da praticidade, motivos pelos quais é amplamente difundido.</p>

<h2 id="o-que-é-uma-vpn">O que é uma VPN?</h2>

<p>Uma <strong>rede privada virtual</strong> (do inglês <em>Virtual Private Network</em>, ou VPN) estabelece uma conexão entre dois computadores distantes, que passam a se comunicar pela Internet como se estivessem conectados a um mesmo <em>switch</em> ou roteador.</p>

<p>Ela funciona assim: os dois computadores pertencem, a princípio, a redes diferentes (eles podem estar em prédios, cidades ou até mesmo países diferentes, por exemplo). Mas eles precisam se comunicar e possuem conexão com a Internet. Então, eles estabelecem na rede mundial um circuito por onde trocam informações de forma privada. É como uma ligação telefônica que não pudesse ser grampeada.</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2016/06/pfsense-vpn-02.jpg" title="Apesar de estarem conectados à Internet, dois computadores em uma VPN se comunicam de forma privada">
<img src="/files/2016/06/pfsense-vpn-02.jpg" alt="Apesar de estarem conectados à Internet, dois computadores em uma VPN se comunicam de forma privada" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

<em class="caption" itemprop="description">
<p>Apesar de estarem conectados à Internet, dois computadores em uma VPN se comunicam de forma privada</p>

</em>

</div>

<p>Para quem utiliza esses computadores, é imperceptível que eles estão distantes. É como se eles estivessem conectados diretamente por um cabo, apesar de esse cabo não existir de verdade (por isso, essa rede é dita <strong>virtual</strong>). E a comunicação, apesar de ocorrer pela Internet, não pode ser lida pelos computadores no meio do caminho entre um e outro, porque os dois computadores que estabelecem a VPN utilizam criptografia para se comunicar (por isso, essa rede é dita <strong>privada</strong>).</p>

<p>Porque a informação trafega por um circuito cujo conteúdo não pode ser lido pelos computadores que ajudam a formar o circuito, nem pelos que estão fora dele, apenas pelos computadores nas pontas (o remetente e o destinatário), a VPN também é conhecida como <strong>túnel</strong>.</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2016/06/pfsense-vpn-03.png" title="Um túnel é bem assim: só quem está dentro dele vê o que por ele passa">
<img src="/files/2016/06/pfsense-vpn-03.png" alt="Um túnel é bem assim: só quem está dentro dele vê o que por ele passa" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

<em class="caption" itemprop="description">
<p>Um túnel é bem assim: só quem está dentro dele vê o que por ele passa</p>

</em>

</div>

<p>Tentando explicar de forma simples, uma VPN é isso.</p>

<p>Com VPNs, podemos fazer algumas coisas interessantes, como por exemplo: em casa ou durante uma viagem a negócios utilizar um <em>notebook</em> para acessar um computador do trabalho (como se estivesse dentro do trabalho); na rua, abrir, do celular, um arquivo que está no computador de casa (como se estivesse em casa); compartilhar arquivos e recursos (como impressoras ou servidores) entre sede e filial da empresa ou entre empresas diferentes.</p>

<p>O Psiphon, que apresentei em <a href="/blog/2015/12/17/acesse-sites-e-aplicativos-censurados-com-o-psiphon/">outro post</a>, é um exemplo interessante de VPN: ele cria um túnel entre seu computador e algum computador anônimo situado em algum lugar bem distante no mundo e redireciona todo o seu tráfego de Internet por esse computador anônimo. Dessa forma, o Psiphon permite que você utilize a Internet de forma anônima.</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2015/12/vpn.png" title="">
<img src="/files/2015/12/vpn.png" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Um uso prático disso é burlar bloqueios e censuras. Recentemente, <a href="http://g1.globo.com/tecnologia/noticia/2015/12/operadoras-sao-intimadas-bloquear-whatsapp-no-brasil-por-48-horas.html">o WhatsApp foi bloqueado no Brasil</a> e muitos internautas recorreram a VPNs como o Psiphon para conseguir usar o aplicativo nos seus celulares. VPNs como essas são muito utilizadas em países com governos autoritários, como a <a href="http://tecnologia.terra.com.br/internet/pai-da-censura-na-china-e-surpreendido-burlando-a-mesma-em-publico,1d6ba1d9b58468d4df30fb84daf29ee6e3c193t0.html">China</a>.</p>

<h2 id="o-que-preciso-para-criar-uma-vpn">O que preciso para criar uma VPN?</h2>

<p>Os dois computadores que queremos conectar precisam estar conectados à Internet. Um deles vai atuar como servidor, disponibilizando a VPN. O outro, vai atuar como cliente, utilizando a VPN. Eles também precisam de um protocolo para que consigam se comunicar. Existem alguns protocolos que podem ser usados para estabelecer VPNs, exemplos incluem: <a href="https://technet.microsoft.com/pt-br/library/cc771298(v=ws.10).aspx">PPTP, L2TP, SSTP</a> e <a href="https://openvpn.net/">OpenVPN</a>. Cada protocolo serve a um tipo de VPN e pode ser mais adequado para uma ou outra finalidade.</p>

<p>Aqui, vou explicar como estabelecer uma VPN entre um <em>firewall</em> pfSense (suponho que já esteja instalado e funcionando) e um computador com <a href="https://www.microsoft.com/pt-br/windows/">Windows</a> ou um celular com <a href="https://www.android.com/intl/pt-BR_br/">Android</a>.</p>

<p>A ideia de escrever foi compartilhar a experiência vivida onde eu trabalho.</p>

<p>Quero citar o excelente tutorial passo a passo do <a href="http://thiago.oxente.org/2011/11/09/pfsense-2-0-e-openvpn-e-autenticando-no-windows-2008/">Thiago Melo</a>, que aqui utilizo como base para escrever uma versão um pouco mais atual e acrescentando alguns comentários meus.</p>

<p>Para referência futura, a versão do pfSense utilizado aqui é a 2.3, lançada em <a href="https://blog.pfsense.org/?p=2008">abril de 2016</a>, e a do OpenVPN é a 2.1.11, lançada em <a href="http://swupdate.openvpn.org/community/releases/">maio de 2016</a>.</p>

<h2 id="criando-a-vpn-no-pfsense">Criando a VPN no pfSense</h2>

<p>O pfSense vem com um assistente (<em>wizard</em>) que pode ser utilizado para criar VPNs, mais ou menos no famoso estilo <em>next</em>, <em>next</em>, <em>next</em> (avançar, avançar, avançar) do Windows. No entanto, eu o achei um tanto falho. Quando eu o utilizava, ele repetia algumas configurações entre as VPNs. Assim, passei a fazer a maior parte das etapas manualmente, deixando o assistente apenas para configurar a VPN propriamente dita e as regras do <em>firewall</em>, que são as etapas finais.</p>

<p>Vamos configurar manualmente os pré-requisitos para a VPN.</p>

<p>Primeiro, precisamos de uma <strong>autoridade certificadora</strong> (do inglês <em>Certificate Authority</em>, CA) para emitir os certificados do servidor e do cliente. Vá em <strong>System</strong>, <strong>Cert. Manager</strong>, aba <strong>CAs</strong> e clique no botão <strong>Add</strong>. Preencha o cadastro com as informações a seguir (claro, lembre-se sempre de alterar de acordo com as suas necessidades):</p>

<ul>
  <li><strong>Descriptive name:</strong> MINHACASA_CA</li>
  <li><strong>Method:</strong> Create an internal Certificate Authority</li>
  <li><strong>Country Code:</strong> BR</li>
  <li><strong>State or Province:</strong> Rio Grande do Sul</li>
  <li><strong>City:</strong> Pelotas</li>
  <li><strong>Organization:</strong> Minha Casa</li>
  <li><strong>Email Address:</strong> vinyanalista@minhacasa.net</li>
  <li><strong>Common Name:</strong> minhacasa-ca</li>
</ul>

<p>Clique em <strong>Save</strong>:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2016/06/pfsense-vpn-04.jpg" title="">
<img src="/files/2016/06/pfsense-vpn-04.jpg" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Depois, precisamos de um certificado para o servidor. De volta à tela <strong>Certificate Manager</strong>, clique na aba <strong>Certificates</strong> e clique no botão <strong>Add</strong>. Preencha o cadastro com as informações a seguir:</p>

<ul>
  <li><strong>Method</strong>: Create an internal Certificate</li>
  <li><strong>Descriptive name:</strong> VPN de teste</li>
  <li><strong>Certificate authority:</strong> MINHACASA_CA</li>
  <li><strong>Certificate Type:</strong> Server Certificate</li>
  <li><strong>Country Code:</strong> BR</li>
  <li><strong>State or Province:</strong> Rio Grande do Sul</li>
  <li><strong>City:</strong> Pelotas</li>
  <li><strong>Organization:</strong> Minha Casa</li>
  <li><strong>Email Address:</strong> vinyanalista@minhacasa.net</li>
  <li><strong>Common Name:</strong> vpn-de-teste</li>
</ul>

<p>Clique em <strong>Save</strong>:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2016/06/pfsense-vpn-05.jpg" title="">
<img src="/files/2016/06/pfsense-vpn-05.jpg" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Precisamos também cadastrar os usuários que utilizarão a VPN (<em>login</em> e senha) e criar certificados para esses usuários. Vá em <strong>System</strong>, <strong>User Manager</strong> e clique no botão <strong>Add</strong>. Preencha o cadastro com as informações a seguir:</p>

<ul>
  <li><strong>Username</strong>: vinyanalista</li>
  <li><strong>Password:</strong> Alg0$3guro!</li>
  <li><strong>Full name:</strong> Antônio Vinícius Menezes Medeiros</li>
</ul>

<p>Em <strong>Certificate</strong>, marque <strong>Click to create a user certificate</strong> para que ele gere um certificado para o usuário que estamos cadastrando. Acrescente as informações:</p>

<ul>
  <li><strong>Descriptive name:</strong> vinyanalista</li>
  <li><strong>Certificate authority:</strong> MINHACASA_CA</li>
</ul>

<p>Clique em <strong>Save</strong>:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2016/06/pfsense-vpn-06.jpg" title="">
<img src="/files/2016/06/pfsense-vpn-06.jpg" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Agora vamos à configuração da VPN propriamente dita.</p>

<p>Vá em <strong>VPN</strong>, <strong>OpenVPN</strong> e clique na aba <strong>Wizards</strong>. É iniciado então o <strong>OpenVPN Remote Access Server Setup</strong>. Na primeira tela, <strong>Select an Authentication Backend Type</strong>, escolha <strong>Local User Access</strong>, e clique em <strong>Next</strong>:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2016/06/pfsense-vpn-07.jpg" title="">
<img src="/files/2016/06/pfsense-vpn-07.jpg" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Na segunda tela, <strong>Choose a Certificate Authority (CA)</strong>, selecione a autoridade cerficadora que foi criada anteriormente (<strong>MINHACASA_CA</strong>) e clique em <strong>Next</strong>:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2016/06/pfsense-vpn-08.jpg" title="">
<img src="/files/2016/06/pfsense-vpn-08.jpg" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Na terceira tela, <strong>Choose a Server Certificate</strong>, selecione o certificado de servidor que foi criado anteriormente (<strong>VPN de teste</strong>) e clique em <strong>Next</strong>:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2016/06/pfsense-vpn-09.jpg" title="">
<img src="/files/2016/06/pfsense-vpn-09.jpg" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Na tela seguinte, <strong>Server Setup</strong>, vamos configurar o servidor da VPN. Aqui, você deve preencher de acordo com as configurações da rede do seu servidor (a rede da sua empresa, por exemplo). Vejamos algumas configurações:</p>

<ul>
  <li><strong>Interface:</strong> WAN (interface de rede na qual o servidor aguardará pela conexão do cliente, deve apresentar conexão com a Internet)</li>
  <li><strong>Local Port:</strong> 1194 (porta na qual o servidor aguardará pela conexão do cliente, 1194 é a porta convencional para o protocolo OpenVPN, você pode utilizar essa porta para a primeira VPN, mas se for criar outras, deverá reservar portas diferentes para cada VPN, por exemplo 1195, 1196…)</li>
  <li><strong>Description:</strong> VPN de teste (descrição da VPN, deve ser um nome informativo, até porque aparecerá na tela do cliente identificando a conexão)</li>
  <li><strong>Tunnel Network:</strong> 192.168.26.0/24 (endereço e máscara da rede virtual privada, no formato de <a href="https://pt.wikipedia.org/wiki/CIDR">CIDR</a>, observe que o pfSense tomará o primeiro endereço IP para ele, nesse caso 192.168.26.1, e os demais endereços IPs serão atribuídos aos clientes)</li>
  <li><strong>Local Network:</strong> 192.168.25.0/24 (endereço e máscara da rede interna que o cliente conectado pela VPN poderá acessar, é possível especificar mais de uma rede separando as redes por vírgula e até mesmo restringir o acesso a apenas um computador na rede interna, por exemplo 192.168.25.2/32)</li>
</ul>

<p>Com relação ao campo <strong>Tunnel Network</strong>, devo observar que ele determina a quantidade de computadores que poderão se conectar pela VPN. Obrigatoriamente, o servidor consumirá 1 endereço IP da VPN. Além disso, o pfSense não deixa criarmos uma VPN cujo endereço de rede utilize 30, 31 ou 32 <em>bits</em> do endereço IP. Então, a menor rede virtual privada que podemos criar utiliza 29 <em>bits</em> do endereço IP para se identificar. Com os 3 <em>bits</em> restantes, podemos endereçar 5 clientes.</p>

<p>Para esclarecer a explicação, se tivéssemos preenchido o campo <strong>Tunnel Network</strong> com <strong>192.168.26.0/29</strong>, os endereços da nossa VPN seriam assim:</p>

<ul>
  <li><strong>192.168.26.0:</strong> endereço da rede</li>
  <li><strong>192.168.26.1:</strong> endereço do pfSense</li>
  <li><strong>192.168.26.2:</strong> endereço atribuído ao primeiro cliente que se conectar à VPN</li>
  <li><strong>192.168.26.3:</strong> endereço atribuído ao segundo cliente</li>
  <li><strong>192.168.26.4:</strong> endereço atribuído ao terceiro cliente</li>
  <li><strong>192.168.26.5:</strong> endereço atribuído ao quarto cliente</li>
  <li><strong>192.168.26.6:</strong> endereço atribuído ao quinto cliente</li>
  <li><strong>192.168.26.7:</strong> endereço de <em>broadcast</em></li>
</ul>

<p>Provavelmente os campos <strong>Tunnel Network</strong> e <strong>Local Network</strong> são os que merecem mais cuidado nessa tela.</p>

<p>Há alguns campos que podem ser preenchidos caso você necessite configurar o cliente conectado à VPN usando DHCP. Desses, destaco:</p>

<ul>
  <li><strong>DNS Default Domain</strong></li>
  <li><strong>DNS Server 1</strong>, <strong>DNS Server 2</strong>, <strong>DNS Server 3</strong> e <strong>DNS Server 4</strong></li>
  <li><strong>NTP Server</strong> e <strong>NTP Server 2</strong></li>
  <li><strong>WINS Server 1</strong> e <strong>WINS Server 2</strong></li>
</ul>

<p>Perceba que essa tela é extensa, mas nela estão quase todas as configurações da VPN:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2016/06/pfsense-vpn-10.jpg" title="">
<img src="/files/2016/06/pfsense-vpn-10.jpg" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Quando terminar de configurar a VPN, clique em <strong>Next</strong>.</p>

<p>Na penúltima tela do assistente, <strong>Firewall Rule Configuration</strong>, certifique-se de que as duas opções <strong>Firewall Rule</strong> e <strong>OpenVPN rule</strong> estejam marcadas. Com isso, o pfSense criará automaticamente as regras de <em>firewall</em> necessárias para que a VPN funcione. Clique em <strong>Next</strong>:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2016/06/pfsense-vpn-11.jpg" title="">
<img src="/files/2016/06/pfsense-vpn-11.jpg" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>A última tela apenas informa que a VPN foi criada. Clique em <strong>Finish</strong>:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2016/06/pfsense-vpn-12.jpg" title="">
<img src="/files/2016/06/pfsense-vpn-12.jpg" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<h2 id="exportando-o-software-cliente">Exportando o <em>software</em> cliente</h2>

<p>O pfSense é capaz de exportar o <em>software</em> e os arquivos de configuração que devem ser instalados no computador cliente para que ele consiga se conectar à VPN. Para isso, usamos o <strong>OpenVPN Client Export Utility</strong>. Esse utilitário não acompanha a instalação padrão do pfSense, sendo disponibilizado como um pacote.</p>

<p>Caso você ainda não o tenha instalado, vá em <strong>System</strong>, <strong>Package Manager</strong>, na aba <strong>Available Packages</strong>, busque por esse pacote e o instale clicando no botão <strong>Install</strong>:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2016/06/pfsense-vpn-13.jpg" title="">
<img src="/files/2016/06/pfsense-vpn-13.jpg" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Com o utilitário instalado, vá em <strong>VPN</strong>, <strong>OpenVPN</strong>, aba <strong>Client Export</strong>.</p>

<p>Em <strong>Remote Access Server</strong>, selecione a VPN (nesse exemplo, <strong>VPN de teste</strong>).</p>

<p>Mais abaixo, no final da página, na linha correspondente ao usuário que deve acessar a VPN (nesse exemplo, <strong>vinyanalista</strong>), clique no botão correspondente ao cliente que deseja exportar.</p>

<p>Vou demonstrar como conectar à VPN um computador cujo sistema operacional é o Windows 10 de 64 <em>bits</em>. Nesse caso, clique no botão <strong>x64-win6</strong> para exportar o cliente correspondente:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2016/06/pfsense-vpn-14.jpg" title="">
<img src="/files/2016/06/pfsense-vpn-14.jpg" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>O <em>download</em> do instalador do cliente é iniciado. Esse arquivo (cujo nome deve ser algo parecido com <strong>firewall-udp-1194-vinyanalista-install.exe</strong>) deve ser copiado ou movido para o computador cliente.</p>

<p>Também vou demonstrar como conectar à VPN um celular com sistema Android. Você pode aproveitar para já baixar também o arquivo de configuração que será necessário. Para isso, clique no botão <strong>Android</strong>. Esse arquivo (cujo nome deve ser algo parecido com <strong>firewall-udp-1194-vinyanalista-android-config.ovpn</strong>) deve ser copiado ou movido para o celular. No caso do Android, o <em>software</em> cliente é instalado pela <a href="https://play.google.com/store/">Play Store</a>, por isso o pfSense exporta apenas o arquivo de configuração.</p>

<h2 id="conectando-à-vpn-pelo-windows-10">Conectando à VPN pelo Windows 10</h2>

<p>No computador cliente, execute o instalador do cliente OpenVPN, baixado do pfSense. A instalação é bem simples. Aqui, mais uma vez, é <em>next</em>, <em>next</em>, <em>next</em>:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2016/06/pfsense-vpn-15.jpg" title="">
<img src="/files/2016/06/pfsense-vpn-15.jpg" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Terminada a instalação, para iniciar o cliente OpenVPN, abra o <strong>menu Iniciar</strong>, clique em <strong>Todos os programas</strong>, depois em <strong>OpenVPN</strong> e, por fim, em <strong>OpenVPN GUI</strong>:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2016/06/pfsense-vpn-16.jpg" title="">
<img src="/files/2016/06/pfsense-vpn-16.jpg" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>O cliente OpenVPN é iniciado. Observe seu ícone na área de notificação:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2016/06/pfsense-vpn-17.jpg" title="">
<img src="/files/2016/06/pfsense-vpn-17.jpg" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Dê dois clique nesse ícone. O cliente solicita usuário e senha para se conectar com a VPN. Informe o usuário e a senha que você configurou no pfSense e clique em <strong>OK</strong>:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2016/06/pfsense-vpn-18.jpg" title="">
<img src="/files/2016/06/pfsense-vpn-18.jpg" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Se conseguir se conectar, o cliente OpenVPN mostra uma notificação com o endereço IP que foi atribuído ao computador dentro da rede privada virtual. Observe também que o ícone do cliente muda sua cor para verde, indicando que está conectado:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2016/06/pfsense-vpn-19.jpg" title="">
<img src="/files/2016/06/pfsense-vpn-19.jpg" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Como teste, você pode abrir o <strong>Prompt de comando</strong> do Windows e verificar a conectividade com algum computador na rede da outra ponta da VPN:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="rouge-code"><pre>Microsoft Windows [versão 10.0.10240]
(c) 2015 Microsoft Corporation. Todos os direitos reservados.

C:\Users\Vinicius&gt;ping 172.20.0.4

Disparando 172.20.0.4 com 32 bytes de dados:
Resposta de 172.20.0.4: bytes=32 tempo=127ms TTL=62
Resposta de 172.20.0.4: bytes=32 tempo=78ms TTL=62
Resposta de 172.20.0.4: bytes=32 tempo=104ms TTL=62
Resposta de 172.20.0.4: bytes=32 tempo=97ms TTL=62

Estatísticas do Ping para 172.20.0.4:
    Pacotes: Enviados = 4, Recebidos = 4, Perdidos = 0 (0% de
             perda),
Aproximar um número redondo de vezes em milissegundos:
    Mínimo = 78ms, Máximo = 127ms, Média = 101ms

C:\Users\Vinicius&gt;
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Quando não precisar usar mais a VPN, clique com o botão direito do <em>mouse</em> no ícone do cliente OpenVPN e em seguida clique em <strong>Sair</strong>:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2016/06/pfsense-vpn-20.jpg" title="">
<img src="/files/2016/06/pfsense-vpn-20.jpg" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<h3 id="solução-de-problemas">Solução de problemas</h3>

<p>Caso você perceba que não conseguiu se conectar à VPN e o cliente exibe uma mensagem como esta:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>TLS Error: TLS key negotiation failed to occur within 60 seconds (check your network connectivity)
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Significa que o cliente e o servidor OpenVPN não estão conseguindo se comunicar, podendo a causa do problema estar em uma ponta ou outra da conexão. É provável que seu computador esteja sem conexão com a Internet ou algum <em>firewall</em> esteja impedindo a conexão do seu computador com o servidor da VPN.</p>

<p>Algumas verificações que você pode fazer do lado do cliente:</p>

<ol>
  <li>Tentar executar o cliente OpenVPN como administrador;</li>
  <li>Verificar a hora do computador (para que a conexão segura possa ser estabelecida é um pré-requisito que a hora esteja correta);</li>
  <li>Verificar no Firewall do Windows se a porta número 1194 está liberada para receber conexões TCP e UDP (se não estiver liberada, adicionar exceção);</li>
  <li>Verificar no Firewall do Windows se o aplicativo <strong>openvpn.exe</strong> está sendo bloqueado (se estiver bloqueado, adicionar exceção);</li>
  <li>Se houver algum <em>firewall</em> entre o computador e o provedor de Internet, verificá-lo também; e</li>
  <li>Se já havia um cliente OpenVPN instalado no computador e o instalador baixado do pfSense apenas acrescentou a configuração da VPN recém-criada, considere a possibilidade de desinstalar o cliente já instalado na máquina e instalar o fornecido, que pode ser mais novo e conter correções para <em>bugs</em> e falhas de segurança.</li>
</ol>

<p>Falando em <em>bug</em>, pode acontecer de o cliente OpenVPN relatar que conseguiu se conectar, mas não conseguiu configurar rotas para a rede privada virtual:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre>Tue Jun 14 22:15:09 2016 ROUTE: route addition failed using CreateIpForwardEntry: Acesso negado.   [status=5 if_index=4]
Tue Jun 14 22:15:09 2016 env_block: add PATH=C:\Windows\System32;C:\Windows;C:\Windows\System32\Wbem
Tue Jun 14 22:15:09 2016 ERROR: Windows route add command failed [adaptive]: returned error code 1
Tue Jun 14 22:15:09 2016 ROUTE: route addition failed using CreateIpForwardEntry: Acesso negado.   [status=5 if_index=4]
Tue Jun 14 22:15:09 2016 env_block: add PATH=C:\Windows\System32;C:\Windows;C:\Windows\System32\Wbem
Tue Jun 14 22:15:10 2016 ERROR: Windows route add command failed [adaptive]: returned error code 1
Tue Jun 14 22:15:10 2016 Initialization Sequence Completed
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Isso é um <a href="https://community.openvpn.net/openvpn/ticket/68"><em>bug</em></a> que afetava versões antigas do cliente OpenVPN, mas já foi corrigido. Você pode <a href="https://openvpn.net/index.php/open-source/downloads.html">baixar a versão mais recente do cliente OpenVPN</a>, instalá-la em seu computador e repetir os passos acima para se conectar à VPN normalmente. Ou, se não quiser fazer isso, você pode tentar executar o cliente já instalado em seu computador com permissões de administrador.</p>

<p>Quando você conseguir se conectar sem problemas, o cliente OpenVPN deve exibir uma sequência de mensagens parecida com esta:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre>Tue Jun 14 22:18:06 2016 OpenVPN 2.3.11 x86_64-w64-mingw32 [SSL (OpenSSL)] [LZO] [PKCS11] [IPv6] built on May 10 2016
Tue Jun 14 22:18:06 2016 Windows version 6.2 (Windows 8 or greater) 64bit
Tue Jun 14 22:18:06 2016 library versions: OpenSSL 1.0.1t  3 May 2016, LZO 2.09
Tue Jun 14 22:19:34 2016 Control Channel Authentication: using 'firewall-udp-1194-antonio.medeiros-tls.key' as a OpenVPN static key file
Tue Jun 14 22:19:34 2016 UDPv4 link local (bound): [undef]
Tue Jun 14 22:19:34 2016 UDPv4 link remote: [AF_INET]187.86.133.121:1194
Tue Jun 14 22:19:35 2016 WARNING: this configuration may cache passwords in memory -- use the auth-nocache option to prevent this
Tue Jun 14 22:19:35 2016 [VPN do HEUFPEL] Peer Connection Initiated with [AF_INET]187.86.133.121:1194
Tue Jun 14 22:19:38 2016 do_ifconfig, tt-&gt;ipv6=0, tt-&gt;did_ifconfig_ipv6_setup=0
Tue Jun 14 22:19:38 2016 open_tun, tt-&gt;ipv6=0
Tue Jun 14 22:19:38 2016 TAP-WIN32 device [Ethernet 3] opened: \\.\Global\{2D6F99C4-A78C-48F2-A301-AEBFDD5B5E30}.tap
Tue Jun 14 22:19:38 2016 Set TAP-Windows TUN subnet mode network/local/netmask = 10.100.201.0/10.100.201.2/255.255.255.0 [SUCCEEDED]
Tue Jun 14 22:19:38 2016 Notified TAP-Windows driver to set a DHCP IP/netmask of 10.100.201.2/255.255.255.0 on interface {2D6F99C4-A78C-48F2-A301-AEBFDD5B5E30} [DHCP-serv: 10.100.201.254, lease-time: 31536000]
Tue Jun 14 22:19:38 2016 Successful ARP Flush on interface [4] {2D6F99C4-A78C-48F2-A301-AEBFDD5B5E30}
Tue Jun 14 22:19:44 2016 Initialization Sequence Completed
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="conectando-à-vpn-pelo-android">Conectando à VPN pelo Android</h2>

<p>Para conectar um celular com Android à VPN que acabamos de criar no nosso <em>firewall</em> pfSense, precisamos instalar um aplicativo cliente no celular. Aqui, vou demonstrar como usar o cliente oficial do OpenVPN, o OpenVPN Connect.</p>

<p>Comece instalando o OpenVPN Connect pela Play Store:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="https://play.google.com/store/apps/details?id=net.openvpn.openvpn" title="Clique para obter o OpenVPN Connect na Play Store">
<img src="/files/2015/12/google-play.png" alt="Clique para obter o OpenVPN Connect na Play Store" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

<em class="caption" itemprop="description">
<p>Clique para obter o OpenVPN Connect na Play Store</p>

</em>

</div>

<p>Se ainda não passou, passe agora para o celular o arquivo de configuração exportado pelo pfSense.</p>

<p>No celular, abra o <strong>menu de Aplicativos</strong> e toque no <strong>OpenVPN Connect</strong>:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2016/06/pfsense-vpn-21.jpg" title="">
<img src="/files/2016/06/pfsense-vpn-21.jpg" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>O cliente OpenVPN para Android é iniciado:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2016/06/pfsense-vpn-22.jpg" title="">
<img src="/files/2016/06/pfsense-vpn-22.jpg" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Toque no <strong>botão de opções</strong> (o com 3 pontos que aparece no canto superior direito da tela), em seguida em <strong>Import</strong> e, por último, em <strong>Import Profile from SD card</strong>:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2016/06/pfsense-vpn-23.jpg" title="">
<img src="/files/2016/06/pfsense-vpn-23.jpg" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Localize o arquivo de configuração na memória interna ou no cartão de memória do seu celular, toque nele e depois em <strong>Select</strong>:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2016/06/pfsense-vpn-24.jpg" title="">
<img src="/files/2016/06/pfsense-vpn-24.jpg" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>O cliente solicita usuário e senha para se conectar com a VPN. Informe o usuário e a senha que você configurou no pfSense. Opcionalmente, marque a opção <strong>Save</strong> para que ele memorize o usuário e a senha. Por fim, toque em <strong>Connect</strong>:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2016/06/pfsense-vpn-25.jpg" title="">
<img src="/files/2016/06/pfsense-vpn-25.jpg" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Se conseguir se conectar, o cliente OpenVPN passa a exibir o <em>status</em> da conexão. Observe que ele fixa um ícone na área de notificação, indicando que está conectado:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2016/06/pfsense-vpn-26.jpg" title="">
<img src="/files/2016/06/pfsense-vpn-26.jpg" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Quando não precisar usar mais a VPN, volte ao cliente OpenVPN e toque em <strong>Disconnect</strong>.</p>

<h2 id="conclusão">Conclusão</h2>

<p>É isso. Espero que esse texto possa te ajudar caso necessite. A seguir, listo algumas referências que utilizei além dos <em>links</em> que já apareceram por todo o texto:</p>

<ul>
  <li><a href="http://www.tecmundo.com.br/1427-o-que-e-vpn-.htm">O que é VPN? - TecMundo</a></li>
  <li><a href="http://olhardigital.uol.com.br/noticia/o-que-e-e-para-que-serve-uma-vpn/37913">O que é e para que serve uma VPN? - Olhar Digital</a></li>
  <li><a href="https://technet.microsoft.com/pt-br/library/cc731954(v=ws.10).aspx">O que é VPN? - TechNet</a></li>
  <li><a href="http://www.gta.ufrj.br/grad/13_1/vpn_ipsec/">VPN e IPsec - UFRJ</a></li>
  <li><a href="https://forum.pfsense.org/index.php?topic=81287.0">OpenVPN Errors - TLS handshake failed - fórum do pfSense</a></li>
  <li><a href="https://www.vivaolinux.com.br/topico/servidores-VPN/OPENVPN-no-pfsense-conectando-cliente-windows">OPENVPN no pfsense conectando cliente windows  [RESOLVIDO] [servidores VPN] - Viva o Linux</a></li>
  <li><a href="https://openvpn.net/index.php/open-source/faq/79-client/253-tls-error-tls-key-negotiation-failed-to-occur-within-60-seconds-check-your-network-connectivity.html">TLS Error: TLS key negotiation failed to occur within 60 seconds (check your network connectivity) - FAQ do OpenVPN</a></li>
</ul>


        </div>

        
            <!-- AddThis Sharing Buttons -->
            <div class="gap"></div>
            <h2>Gostou? Então compartilha!</h2>
            <div class="addthis_toolbox addthis_default_style addthis_32x32_style">
                <a class="addthis_button_facebook"></a>
                <a class="addthis_button_twitter" data-via="vinyanalista"></a>
                <a class="addthis_button_google_plusone_share"></a>
                <a class="addthis_button_email"></a>
                <a class="addthis_button_favorites"></a>
                <a class="addthis addthis_button_print"></a>
                <a class="addthis_button_pdfonline"></a>
                <a class="addthis_button_compact"></a>
                <a class="addthis_counter addthis_bubble_style"></a>
            </div>
            <!-- AddThis Sharing Buttons End -->
        

        
            <!-- Disqus -->
            <div class="gap"></div>
            <h2>Comentários</h2>
            <div id="disqus_thread"></div>
            <script>
                var disqus_config = function () {
                    this.page.url = 'https://vinyanalista.github.io/blog/2016/06/26/como-criar-uma-vpn-pfsense-openvpn/';
                };

                (function() {
                    var d = document, s = d.createElement('script');

                    s.src = '//vinyanalista.disqus.com/embed.js';

                    s.setAttribute('data-timestamp', +new Date());
                    (d.head || d.body).appendChild(s);
                })();
            </script>
            <noscript>
                <p><a href="http://www.enable-javascript.com/pt/" target="_blank">Habilite o JavaScript</a> para ver os <a href="https://disqus.com/?ref_noscript" rel="nofollow">comentários providos pelo Disqus</a>.</p>
            </noscript>
            <!-- Disqus End -->
        
    </article>
</div><!-- .blog-post -->

            </div>
            <div class="col-sm-4">
                <div class="card mb-3">
    <div class="card-header">
        <h3><a name="about"></a><a name="author"></a>Sobre mim</h3>
    </div>
    <div class="card-body" itemprop="author" itemscope itemtype="http://schema.org/Person">
        
            <p class="text-center">
                <a href='https://secure.gravatar.com/avatar/5415f4267b44aa9f51b6f89ac4d1656b' title='Antônio Vinícius'>
                    <img src='https://secure.gravatar.com/avatar/5415f4267b44aa9f51b6f89ac4d1656b' alt='Antônio Vinícius' class='img-fluid img-thumbnail rounded-circle'>
                </a>
            </p>
        
        
            <p class="lead text-center" itemprop="name">
                Antônio Vinícius
            </p>
        
        <link itemprop="url" href="https://vinyanalista.github.io">
        <p>
            Aqui tento compartilhar um pouco das minhas experiências como estudante e profissional de TI :)
        </p>
        <p class='text-center'>
            <a href='http://lattes.cnpq.br/2162371468280338' title='Currículo Lattes' itemprop='sameAs'>
                <img src='/assets/img/curriculo_lattes.png' alt='Currículo Lattes' class='img-fluid lattes'>
            </a>
        </p>
        
            <!-- AddThis Follow Buttons -->
            <div class="addthis_toolbox addthis_32x32_style addthis_default_style addthis_follow_buttons text-center">
                
                    <a href="https://facebook.com/pages/vinyanalistacombr/1604841683119097" class="addthis_button_facebook_follow" addthis:userid="pages/vinyanalistacombr/1604841683119097" itemprop="sameAs"></a>
                
                
                    <a href="https://twitter.com/vinyanalista" class="addthis_button_twitter_follow" addthis:userid="vinyanalista" itemprop="sameAs"></a>
                
                
                    <a href="https://www.linkedin.com/in/vinyanalista" class="addthis_button_linkedin_follow" addthis:userid="vinyanalista" itemprop="sameAs"></a>
                
                
                    <a href="https://youtube.com/user/viniciusifse" class="addthis_button_youtube_follow" addthis:userid="viniciusifse" itemprop="sameAs"></a>
                
                
                
                    <a href="https://github.com/vinyanalista" class="addthis_button_github_follow" addthis:userid="vinyanalista" itemprop="sameAs"></a>
                
                <a href="/feed.xml" class="addthis_button_rss_follow"></a>
            </div>
            <!-- AddThis Follow Buttons End -->
        
    </div><!-- .card-body -->
</div><!-- .card -->


    <div class="card mb-3">
        <div class="card-body">
            <!-- Google AdSense -->
<ins class="adsbygoogle" id="sidebar_ad_unit"
    style="display:block"
    data-ad-client="ca-pub-5193467168351289"
    data-ad-slot="4511719452"
    data-ad-format="auto"
    data-full-width-responsive="true"></ins>
<!-- End Google AdSense -->

        </div><!-- .col-xs-12 -->
    </div><!-- .row -->


            </div>
        </div>
    </div>

    <footer class="footer">
    <div class="container">
        Copyright &copy; 2019 <a href='#author'>Antônio Vinícius</a>. Todos os direitos reservados. Baseado no <a href='https://github.com/vinyanalista/material-jekyll-plus'>Material site template for Jekyll PLUS</a>.
    </div>
</footer>

<meta itemprop="description" content="O pfSense é uma solução de firewall incrível, não só pela quantidade de recursos que oferece, como também pela facilidade para configurá-lo. Ele permite criar VPNs utilizando, dentre outros protocolos, o OpenVPN, que é livre, versátil e seguro sem abrir mão da praticidade, motivos pelos quais é amplamente difundido.O que é uma VPN?Uma rede privada...">


    <div itemprop="image" itemscope itemtype="http://schema.org/ImageObject">
        <meta itemprop="url" content="https://vinyanalista.github.io/files/2016/06/pfsense-vpn-01.png"/>
        <!--<meta itemprop="width" content=""/>--><!-- TODO Image width -->
        <!--<meta itemprop="height" content=""/>--><!-- TODO Image height -->
    </div>



    <meta itemprop="inLanguage" content="pt"/>



    <!-- Disqus -->
    <script id="dsq-count-scr" src="//vinyanalista.disqus.com/count.js" async></script>
    <!-- Disqus End -->



    <!-- Google AdSense -->
    
        <!-- Google AdSense -->
<ins class="adsbygoogle" id="content_ad_unit_2"
    style="display:block"
    data-ad-client="ca-pub-5193467168351289"
    data-ad-slot="7465185857"
    data-ad-format="auto"
    data-full-width-responsive="true"></ins>
<!-- End Google AdSense -->

    

    <script type="text/javascript">
        adsbygoogle = window.adsbygoogle || [];

        $(document).ready(function(){
            
                var $ad = $('#content_ad_unit_2');
                var $posts = $('.blog-post');
                if (($posts.length > 1) || ($('.blog-archive-title').length > 0)) {
                    // Post listing
                    var post;
                    if ($posts.length > 2) {
                        post = random_number(2, $posts.length);
                    } else {
                        post = 2;
                    }
                    $posts.eq(post - 1).find('.blog-post-content .row').after($ad);
                } else {
                    // Page or post
                    var $paragraphs = $('.blog-post-content p').filter(function() {
                        return ($(this).closest('.no-ads-here').length == 0);
                    });
                    if ($paragraphs.length > 0) {
                        var paragraph;
                        if ($paragraphs.length > 1) {
                            paragraph = random_number(1, $paragraphs.length);
                        } else {
                            paragraph = 1;
                        }
                        $paragraphs.eq(paragraph - 1).after($ad);
                    } else {
                        $ad.remove();
                    }
                }
            
            $('.adsbygoogle').each(function(index, element){
                adsbygoogle.push({});
            });
        });
    </script>
    <!-- Google AdSense End -->



</body>
</html>
