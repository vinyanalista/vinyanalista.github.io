<!DOCTYPE html>
<html lang="pt" prefix="
    addthis: http://www.addthis.com/help/api-spec
    og: http://ogp.me/ns#
    fb: http://ogp.me/ns/fb#
    article: http://ogp.me/ns/article#">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    
        <script type="text/javascript">
            if (("vinyanalista.github.io" == window.location.host) && (window.location.protocol != "https:")) {
                window.location = window.location.toString().replace(/^http:/, "https:");
            }
        </script>
    

    <title>Verificação de integridade e autenticidade com o Gpg4win - Antônio Vinícius</title>
    <meta name="author" content="Antônio Vinícius">
    <meta name="description" content="Por vezes pode ser importante verificar um arquivo obtido da Internet. Duas verificações comuns que reduzem a quase zero as chances de usar um arquivo corrom...">
    <link rel="canonical" href="https://vinyanalista.github.io/blog/2018/10/05/verificacao-de-integridade-e-autenticidade-com-o-gpg4win/">
    <link rel="alternate" type="application/rss+xml" title="Antônio Vinícius" href="https://vinyanalista.github.io/feed.xml" />

    <!-- OpenSearch -->
    <link rel="search" type="application/opensearchdescription+xml" title="Pesquisar em Antônio Vinícius" href="https://vinyanalista.github.io/opensearch.xml" />

    <!-- Open Graph -->
    
        <meta property="article:published_time" content="2018-10-05 18:30:00 -0300"/>
        
            <meta property="article:publisher" content="https://facebook.com/pages/vinyanalistacombr/1604841683119097" />
        
    
    
    
        <meta property="fb:page_id" content="1604841683119097" />
    
    <meta property="og:description" content="Por vezes pode ser importante verificar um arquivo obtido da Internet. Duas verificações comuns que reduzem a quase zero as chances de usar um arquivo corrom..." />
    
        <meta property="og:image" content="https://vinyanalista.github.io/files/2018/10/gpg4win.png" />
    
    <meta property="og:site_name" content="Antônio Vinícius" />
    <meta property="og:title" content="Verificação de integridade e autenticidade com o Gpg4win" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://vinyanalista.github.io/blog/2018/10/05/verificacao-de-integridade-e-autenticidade-com-o-gpg4win/" />

    <!-- Twitter Cards -->
    <meta name="twitter:card" content="summary" />
    
        <meta name="twitter:site" content="@vinyanalista" />
    

    <!-- Favicons (made with RealFaviconGenerator.net) -->
    <link rel="apple-touch-icon" sizes="180x180" href="https://vinyanalista.github.io/apple-touch-icon.png?v=4">
    <link rel="icon" type="image/png" sizes="32x32" href="https://vinyanalista.github.io/favicon-32x32.png?v=4">
    <link rel="icon" type="image/png" sizes="16x16" href="https://vinyanalista.github.io/favicon-16x16.png?v=4">
    <link rel="manifest" href="https://vinyanalista.github.io/site.webmanifest?v=4">
    <link rel="mask-icon" href="/safari-pinned-tab.svg?v=4" color="#2196f3">
    <link rel="shortcut icon" href="https://vinyanalista.github.io/favicon.ico?v=4">
    <meta name="msapplication-TileColor" content="#2196f3">
    <meta name="theme-color" content="#2196f3">

    <!-- CSS -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Material+Icons">
    
        <!--<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">-->
        <!--<link rel="stylesheet" href="https://unpkg.com/bootstrap-material-design@4.1.2/dist/css/bootstrap-material-design.min.css" integrity="sha384-dI6l3oYG+wVvjfdlixt6+FMddrb9+uejLU/wMhQFKklk7RDtSDBfe/XuF1dkcgVV" crossorigin="anonymous">-->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous">
    
    <link rel="stylesheet" href="/libs/bootstrap-material-design/4.1.2/custom/bootstrap-material-design.min.css">
    <link rel="stylesheet" href="/assets/css/syntax.css">
    <link rel="stylesheet" href="/assets/css/main.css">

    <!-- JS -->
    
        <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha256-pasqAKBDmFT4eHoN2ndd6lN370kFiGUFyTiUHWhU7k8=" crossorigin="anonymous"></script>
        <script src="https://unpkg.com/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha256-x3YZWtRjM8bJqf48dFAv/qmgL68SI4jqNWeSLMZaMGA=" crossorigin="anonymous"></script>
        <!--<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>-->
        <script src="https://unpkg.com/bootstrap-material-design@4.1.2/dist/js/bootstrap-material-design.min.js" integrity="sha384-aWO+CcMRDQLEvnT8RdnCxWbs4C76Ryoo4pzYpGNW2vlHTHiPA7gpBzIB5nYwYfLg" crossorigin="anonymous"></script>
    
    <script src="/assets/js/main.js"></script>

    
        <!-- Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-65333685-1"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'UA-65333685-1');
        </script>
        <!-- End Google Analytics -->
    

    
        <!-- Google AdSense -->
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    

    
        <!-- AddThis -->
        <script async src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4f7774466af48b4f"></script>
        <script type="text/javascript">
            var addthis_config = {
                data_track_clickback: true,
                data_track_addressbar: true,
                ui_language: 'pt'
            };
            var addthis_share = {
                url: 'https://vinyanalista.github.io/blog/2018/10/05/verificacao-de-integridade-e-autenticidade-com-o-gpg4win/',
                title: document.title,
                description: 'Por vezes pode ser importante verificar um arquivo obtido da Internet. Duas verificações comuns que reduzem a quase zero as chances de usar um arquivo corrompido ou adulterado são a soma de verificação e a assinatura digital. Nesse post, você verá como fazê-las com o Gpg4win, um software livre gratuito para Windows. Como exemplo, verificaremos...'
            };
        </script>
        <!-- End AddThis -->
    
</head>


<body itemscope itemtype="http://schema.org/BlogPosting">
    <div class="bmd-layout-container bmd-drawer-f-l bmd-drawer-overlay">
        <!-- Fixed navbar -->
<nav class="navbar navbar-expand-md navbar-dark fixed-top bg-primary">
    <div class="container">
        <button type="button" class="navbar-toggler" data-toggle="drawer" data-target="#drawer">
            <span class="sr-only">Toggle drawer</span>
            <i class="material-icons">menu</i>
        </button>

        <a class="navbar-brand" href="/">Antônio Vinícius</a>

        <div class="collapse navbar-collapse" id="navbar">
            <ul class="navbar-nav m-auto">
                <li class="nav-item">
                    <a class="nav-link" href="/">Blog</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/blog/category/trabalhos/">Trabalhos</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="http://lattes.cnpq.br/2162371468280338">Currículo</a>
                </li>
            </ul>
            <form action="/search/" class="form-inline" id="navbar-search-form" method="get" role="search">
                
                
                <div class="input-group">
                    <input class="form-control search-field" id="navbar-search-field" name="q" placeholder="Pesquisar" type="text" aria-label="Pesquisar">
                    <div class="input-group-append">
                        <button class="btn btn-secondary btn-number search-button" id="navbar-search-button" type="submit">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>
                </div>
            </form>
        </div><!--#navbar-->
    </div><!--.container-->
</nav>

        <!-- Navigation drawer -->
<div id="drawer" class="bmd-layout-drawer bg-faded">
    <header>
        <a class="navbar-brand" href="/">Antônio Vinícius</a>
    </header>
    <form action="/search/" class="form-inline border-top" id="drawer-search-form" method="get" role="search">
        
        
        <div class="bmd-form-group-sm">
            <div class="input-group">
                <input class="form-control search-field" id="drawer-search-field" name="q" placeholder="Pesquisar" type="text" aria-label="Pesquisar">
                <div class="input-group-append">
                    <button class="btn btn-secondary btn-number search-button" id="drawer-search-button" type="submit">
                        <i class="fa fa-search"></i>
                    </button>
                </div>
            </div><!-- .input-group -->
        </div><!-- .bmd-form-group-sm -->
    </form>
    <ul class="list-group list-group-flush border-top" id="drawer-links">
        <li class="list-group-item">
            <a class="nav-link" href="/">Blog</a>
        </li>
        <li class="list-group-item">
            <a class="nav-link" href="/blog/category/trabalhos/">Trabalhos</a>
        </li>
        <li class="list-group-item">
            <a class="nav-link" href="http://lattes.cnpq.br/2162371468280338">Currículo</a>
        </li>
    </ul>
</div>


        <main class="bmd-layout-content">
            <div class="container" id="main-container">
                <div class="row">
                    <div class='col-sm-8'>
                        <div class="blog-post card mb-3">
    <header class="card-header">
        <h1 class="blog-post-title" itemprop="headline name">
            <a class="blog-post-link" href="/blog/2018/10/05/verificacao-de-integridade-e-autenticidade-com-o-gpg4win/" itemprop="mainEntityOfPage url">
                Verificação de integridade e autenticidade com o Gpg4win
            </a>
        </h1>
        <div class="blog-post-meta row">
            <div class='col-sm-6'>
                <p class="blog-post-date" itemprop="datePublished" content="2018-10-05">
                    <a href="/blog/2018/10/05/">
                        05 de
                        
                        Outubro
                        
                        de 2018
                    </a>
                </p>
                <meta itemprop="dateModified" content="2018-10-22" />
            </div>
            <div class='col-sm-6'>
                
                    <div class='blog-post-share'>
                        <!-- AddThis Sharing Buttons -->
                        <div class="addthis_toolbox addthis_default_style">
                            <a class="addthis_button_facebook"></a>
                            <a class="addthis_button_twitter" data-via="vinyanalista"></a>
                            <a class="addthis_button_google_plusone_share"></a>
                            <a class="addthis_button_favorites"></a>
                            <a class="addthis_button_compact"></a>
                            <a class="addthis_counter addthis_bubble_style"></a>
                        </div>
                        <!-- AddThis Sharing Buttons End -->
                    </div><!-- .blog-post-share -->
                
            </div><!-- .col-sm-6 -->
        </div><!-- .blog-post-meta -->
    </header>

    <article class="blog-post-content card-body">
        
            
    <!-- Google AdSense -->
    <ins class="adsbygoogle" id="content_ad_unit_1"
        style="display:block"
        data-ad-client="ca-pub-5193467168351289"
        data-ad-slot="5988452654"
        data-ad-format="auto"
        data-full-width-responsive="true"></ins>
    <!-- End Google AdSense -->


        

        <div itemprop="articleBody mainEntity">
            <p>Por vezes pode ser importante verificar um arquivo obtido da Internet, por exemplo, a <a href="https://pt.wikipedia.org/wiki/Imagem_ISO">imagem ISO</a> de uma <a href="https://pt.wikipedia.org/wiki/Distribui%C3%A7%C3%A3o_Linux">distribuição Linux</a> - ela contém o sistema operacional que você vai utilizar ou instalar em seu computador, já pensou se o arquivo se corrompeu durante o <em>download</em> ou foi adulterado por um <a href="https://pt.wikipedia.org/wiki/Ataque_man-in-the-middle">ataque de homem no meio</a>?</p>

<p>Duas verificações comuns que reduzem a quase zero as chances de usar um arquivo corrompido ou adulterado são a <a href="https://pt.wikipedia.org/wiki/Soma_de_verifica%C3%A7%C3%A3o">soma de verificação</a> e a <a href="https://www.gnupg.org/gph/en/manual.html">assinatura digital</a>:</p>

<ul>
  <li>a <strong>soma de verificação</strong> (<em>checksum</em>) é uma soma feita antes do envio por quem cria o arquivo e verificada depois por quem baixa o arquivo, há alguns algoritmos para fazer essa soma, mas a ideia geral é somar os <em>bytes</em> do arquivo - ao verificar a soma de um arquivo, se houve modificação do arquivo ou da soma em si, a verificação falha, indicando que não é seguro usar o arquivo; e</li>
  <li>a <strong>assinatura digital</strong> certifica um arquivo, tal qual uma assinatura à mão, mas por utilizar mecanismos de criptografia tem a vantagem de ser resistente a fraudes - ao verificar a assinatura de um arquivo, se houve modificação do arquivo ou da assinatura em si, ou se a assinatura foi feita com a chave de outra pessoa, a verificação falha, indicando que não é seguro usar o arquivo.</li>
</ul>

<p>Elas verificam, respectivamente, <strong>integridade</strong> e <strong>autenticidade</strong>, duas propriedades básicas da <a href="https://pt.wikipedia.org/wiki/Seguran%C3%A7a_da_informa%C3%A7%C3%A3o">segurança da informação</a>.</p>

<p>Comumente as distribuições Linux disponibilizam somas de verificação <a href="https://pt.wikipedia.org/wiki/SHA-2">SHA-256</a> e assinaturas digitais <a href="https://gnupg.org/">GPG</a>.</p>

<p>Nesse <em>post</em>, você verá como fazer essas verificações com o <a href="https://www.gpg4win.org/"><strong>Gpg4win</strong></a>, um <em>software</em> livre gratuito para <a href="https://www.microsoft.com/pt-br/windows/">Windows</a>. Como referência, aqui uso a versão 3.1.3, <a href="http://lists.wald.intevation.org/pipermail/gpg4win-announce/2018-August/000080.html">lançada em 31/08/2018</a>. Como exemplo, verificaremos uma imagem ISO da distribuição <a href="https://www.opensuse.org/">openSUSE Leap</a>.</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2018/10/gpg4win.png" title="">
<img src="/files/2018/10/gpg4win.png" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Embora usemos aqui o exemplo da imagem ISO, qualquer arquivo pode ser verificado, contanto que a soma de verificação e a assinatura digital estejam disponíveis. É o caso, por exemplo, do instalador do programa <a href="https://www.veracrypt.fr/">VeraCrypt</a>. Curiosamente, <a href="https://wiki.gnupg.org/Gpg4win/CheckIntegrity">é possível usar o Gpg4win para verificar o instalador do próprio Gpg4win</a> (no caso de uma atualização).</p>

<h2 id="visão-geral">Visão geral</h2>

<p>Como a verificação de uma imagem ISO não é um processo tão simples, primeiro tenhamos uma visão geral do processo. Antes de começar, teremos uma etapa inicial de configuração do computador, com a instalação do Gpg4win. Depois, a “receita de bolo” se resume a:</p>

<ol>
  <li>Baixar a imagem ISO do <em>site</em> da distribuição (como de costume, nenhuma novidade);</li>
  <li>Baixar a soma de verificação e a assinatura digital do <em>site</em> da distribuição, a depender da distribuição elas podem ser dois arquivos ou pode ser apenas um arquivo de texto contendo ambas (o openSUSE é o segundo caso);</li>
  <li>Importar a chave pública da distribuição, seja do <em>site</em> da distribuição, seja de um servidor de chaves públicas confiável (obteremos a chave do <em>site</em> do openSUSE, mas <a href="https://pt.opensuse.org/SDB:Ajuda_de_download">o openSUSE também tem um servidor de chaves</a>);</li>
  <li>Fazer a soma de verificação da imagem ISO baixada e conferir com a soma de verificação esperada; e</li>
  <li>Verificar a assinatura digital, que pode ter sido feita em relação à imagem ISO, ou em relação à soma de verificação, o que estende a proteção à soma de verificação (o openSUSE é o segundo caso).</li>
</ol>

<p>O processo pode variar de acordo com a distribuição, mas geralmente segue essa linha. Por exemplo, há vários algoritmos de somas de verificação. O algoritmo <a href="https://pt.wikipedia.org/wiki/MD5">MD5</a> era mais popular, mas tem sido substituído pelo <a href="https://pt.wikipedia.org/wiki/SHA-2">SHA-256</a>, que em tese é menos vulnerável. Também há distribuições que não fazem assinatura digital, nesses casos não é possível verificar a autenticidade da imagem ISO.</p>

<h2 id="1-download-e-instalação-do-gpg4win">1) Download e instalação do Gpg4win</h2>

<p>Baixe o Gpg4win do seu <em>site</em> oficial: <a href="https://www.gpg4win.org/">https://www.gpg4win.org/</a></p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2018/10/gpg4win-01.jpg" title="">
<img src="/files/2018/10/gpg4win-01.jpg" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Em se tratando de segurança da informação, sempre obtenha os arquivos dos seus respectivos <em>sites</em> oficiais. Nesse <em>post</em>, não vou fornecer nenhum <em>link</em> para <em>download</em> direto.</p>

<p>Também pensando na segurança, nos deparamos agora com um dilema: estamos baixando o Gpg4win para verificar arquivos baixados, mas como verificamos o próprio Gpg4win?</p>

<p>Pensando nisso, os desenvolvedores do Gpg4win possibilitaram verificar a integridade e a autenticidade do instalador usando recursos do próprio Windows.</p>

<p>Na página de <em>download</em> do Gpg4win, clique no <em>link</em> <strong>Check integrity</strong> (traduzindo: Verificar integridade). Vamos precisar das informações que constam nessa página.</p>

<h3 id="11-verificando-a-integridade-do-gpg4win">1.1) Verificando a integridade do Gpg4win</h3>

<p>No Windows, é possível fazer somas de verificação usando o utilitário de linha de comando <strong>CertUtil</strong>. Inicie o aplicativo <a href="https://pt.wikipedia.org/wiki/Prompt_de_comando"><strong>Prompt de Comando</strong></a> pelo <strong>menu Iniciar</strong>, digite o comando a seguir e tecle <strong>Enter</strong> (substitua <code class="highlighter-rouge">gpg4win-3.1.3.exe</code> pelo nome do arquivo, se for diferente):</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>CertUtil -hashfile Downloads\gpg4win-3.1.3.exe SHA256
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="12-verificando-a-autenticidade-do-gpg4win">1.2) Verificando a autenticidade do Gpg4win</h3>

<p>Para verificar a assinatura do instalador do Gpg4win, clique com o botão direito do <em>mouse</em> no instalador baixado e clique em <strong>Propriedades</strong>. Na caixa de diálogo que abre, selecione a aba <strong>Assinaturas Digitais</strong> e clique no botão <strong>Detalhes</strong>. Na nova caixa de diálogo, selecione a aba <strong>Avançado</strong> e depois a opção <strong>Número de série</strong>.</p>

<p>Compare os valores informados pelo Windows com os presentes no <em>site</em> do Gpg4win:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2018/10/gpg4win-02.png" title="">
<img src="/files/2018/10/gpg4win-02.png" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Se os valores conferem, você baixou o instalador corretamente. Execute-o como administrador e faça a instalação, no estivo Avançar, Avançar, Concluir…</p>

<h2 id="2-baixando-a-imagem-iso-do-opensuse">2) Baixando a imagem ISO do openSUSE</h2>

<p>Baixe a imagem de instalação via rede do openSUSE Leap, assim como o arquivo da soma de verificação, em:</p>

<p><a href="https://software.opensuse.org/distributions/leap">https://software.opensuse.org/distributions/leap</a></p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2018/10/gpg4win-03.png" title="">
<img src="/files/2018/10/gpg4win-03.png" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Escolhi a imagem de instalação via rede por ser o menor arquivo, apenas para exemplo.</p>

<p>Quando acabar, você deve ver dois arquivos na pasta <code class="highlighter-rouge">Downloads</code>:</p>

<ul>
  <li>a imagem ISO (<code class="highlighter-rouge">openSUSE-Leap-15.0-NET-x86_64.iso.sha256</code>) e</li>
  <li>a soma de verificação (<code class="highlighter-rouge">openSUSE-Leap-15.0-NET-x86_64.iso.sha256</code>).</li>
</ul>

<h2 id="3-importando-a-chave-pública-do-opensuse">3) Importando a chave pública do openSUSE</h2>

<p>Mais abaixo na página <strong>Baixe o openSUSE</strong>, na seção <strong>Verifique seu download antes de usar</strong>, clique no grande número em <a href="https://pt.wikipedia.org/wiki/Sistema_de_numera%C3%A7%C3%A3o_hexadecimal">hexadecimal</a>:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2018/10/gpg4win-04.png" title="">
<img src="/files/2018/10/gpg4win-04.png" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Na página seguinte, clique no outro número, menor, também em hexadecimal (curiosamente, não é outro número, são os 8 últimos dígitos do anterior, como se fosse um resumo):</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2018/10/gpg4win-05.png" title="">
<img src="/files/2018/10/gpg4win-05.png" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>A página seguinte mostra a chave pública do Projeto openSUSE em formato de texto.</p>

<p>Selecione tudo entre <code class="highlighter-rouge">-----BEGIN PGP PUBLIC KEY BLOCK-----</code> e <code class="highlighter-rouge">-----END PGP PUBLIC KEY BLOCK-----</code> e copie:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2018/10/gpg4win-06.png" title="">
<img src="/files/2018/10/gpg4win-06.png" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Inicie o aplicativo <a href="https://www.openpgp.org/software/kleopatra/"><strong>Kleopatra</strong></a>, incluso no Gpg4win, vá no menu <strong>Ferramentas</strong>, aponte para <strong>Área de transferência</strong>, e clique em <strong>Importação do certificado</strong>:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2018/10/gpg4win-07.png" title="">
<img src="/files/2018/10/gpg4win-07.png" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Você agora deve ver a chave pública do openSUSE importada no Kleopatra, que oferece para assinar a chave, marcando-a como confiável, vamos por enquanto clicar em <strong>Não</strong>:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2018/10/gpg4win-08.png" title="">
<img src="/files/2018/10/gpg4win-08.png" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Isso na verdade é opcional, volto a explicar no final.</p>

<p>Faça um duplo clique na chave e confira a impressão digital (<em>fingerprint</em>) com a presente no <em>site</em> do openSUSE. Se os números conferem, você importou com sucesso a chave pública do openSUSE para o Kleopatra:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2018/10/gpg4win-09.png" title="">
<img src="/files/2018/10/gpg4win-09.png" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<h2 id="4-verificando-a-integridade-da-imagem-iso">4) Verificando a integridade da imagem ISO</h2>

<p>Na tela principal do Kleopatra, vá no menu <strong>Arquivo</strong> e clique em <strong>Verificar arquivos de soma de verificação</strong>:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2018/10/gpg4win-10.png" title="">
<img src="/files/2018/10/gpg4win-10.png" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Informe a localização do arquivo que contém a soma de verificação (<code class="highlighter-rouge">openSUSE-Leap-15.0-NET-x86_64.iso.sha256</code>).</p>

<p>Na tela seguinte, se a soma de verificação confere, o arquivo da imagem ISO (<code class="highlighter-rouge">openSUSE-Leap-15.0-NET-x86_64.iso</code>) é destacado na cor verde:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2018/10/gpg4win-11.png" title="">
<img src="/files/2018/10/gpg4win-11.png" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Na parte inferior da janela, aparece <strong>Ocorreu um erro</strong>. Essa mensagem é exibida provavelmente porque o Kleopatra não interpreta nesse momento as linhas referentes à assinatura GPG. Se tiver curiosidade, você pode ver essas linhas abrindo o arquivo da soma de verificação usando um programa como o <a href="https://notepad-plus-plus.org/">Notepad++</a>:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2018/10/gpg4win-12.png" title="">
<img src="/files/2018/10/gpg4win-12.png" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Se a soma de verificação não confere, o arquivo da imagem ISO é destacado na cor vermelha. Clicando em <strong>Mostrar</strong>, é possível ver na última linha <em>checksums did NOT match</em> (somas de verificação NÃO conferem):</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2018/10/gpg4win-13.png" title="">
<img src="/files/2018/10/gpg4win-13.png" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Se isso acontecer, você deve tentar baixar a imagem ISO novamente.</p>

<h2 id="5-verificando-a-autentiticade-da-imagem-iso">5) Verificando a autentiticade da imagem ISO</h2>

<p>Na tela principal do Kleopatra, vá no menu <strong>Arquivo</strong> e clique em <strong>Descriptografar/verificar</strong>:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2018/10/gpg4win-14.png" title="">
<img src="/files/2018/10/gpg4win-14.png" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Informe a localização do arquivo que contém a soma de verificação.</p>

<p>Se a chave não foi assinada (etapa que o Kleopatra nos ofereceu, mas pulamos antes) e a verificação da assinatura confere, o Kleopatra mostra uma mensagem neutra, que não parece uma mensagem nem de sucesso nem de erro:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2018/10/gpg4win-15.png" title="">
<img src="/files/2018/10/gpg4win-15.png" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>O ideal seria assinar a chave, como explicarei a seguir, mas realmente penso que é um passo a mais e opcional. Se você é do tipo tranquilo, pode ficar satisfeito com a mensagem acima e usar a imagem ISO tranquilamente. Veja como uma assinatura inválida parece.</p>

<p>Independente de a chave ter sido assinada ou não, se a verificação da assinatura falha, o Kleopatra mostra <strong>Assinatura inválida</strong>, em vermelho:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2018/10/gpg4win-16.png" title="">
<img src="/files/2018/10/gpg4win-16.png" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Se isso acontecer, você deve tentar baixar a imagem ISO novamente.</p>

<h2 id="6-opcionalidades">6) Opcionalidades</h2>

<p>Até aqui, você fez todos os passos que elencamos na visão geral, no início.</p>

<p>Você pode ir um passo além assinando a chave pública do openSUSE com uma chave privada sua, sinalizando para o Kleopatra que você confia que a chave pública do openSUSE pertence de fato ao openSUSE.</p>

<p>Pode parecer burocrático, mas da forma como o GPG foi projetado, idealmente as pessoas trocariam chaves apenas pessoalmente, para formar uma rede de confiança. Na prática, não é assim que funciona. Obter a chave pública do <em>site</em> da distribuição é o máximo que você pode fazer enquanto usuário final que deseja verificar uma imagem ISO. De qualquer forma, já é mais seguro do que baixar a imagem ISO e confiar nela sem fazer nenhuma verificação.</p>

<p>Para assinar a chave pública do openSUSE, você precisa antes criar um par de chaves seu.</p>

<h2 id="61-criando-um-par-de-chaves-pessoal">6.1) Criando um par de chaves pessoal</h2>

<p>Na tela principal do Kleopatra, vá no menu <strong>Arquivo</strong> e clique em <strong>Novo Par de Chaves</strong>:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2018/10/gpg4win-17.png" title="">
<img src="/files/2018/10/gpg4win-17.png" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Na primeira tela do <strong>Assistente de Criação de Pares de Chaves</strong>, clique em <strong>Criar um par de chaves OpenGPG pessoal</strong>:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2018/10/gpg4win-18.png" title="">
<img src="/files/2018/10/gpg4win-18.png" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Na tela seguinte, preencha os campos <strong>Nome</strong> e <strong>E-mail</strong> e clique em <strong>Next</strong> (Avançar, esqueceram de traduzir esse botão):</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2018/10/gpg4win-19.png" title="">
<img src="/files/2018/10/gpg4win-19.png" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Confirme seus dados e clique em <strong>Criar</strong>:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2018/10/gpg4win-20.png" title="">
<img src="/files/2018/10/gpg4win-20.png" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Crie uma senha (<em>passphrase</em>) para a nova chave, digite de novo no campo abaixo para se certificar que não digitou errado, e clique em <strong>OK</strong>:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2018/10/gpg4win-21.png" title="">
<img src="/files/2018/10/gpg4win-21.png" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Kleopatra informa que <strong>O par de chaves foi criado com sucesso</strong>. Clique em <strong>Terminar</strong>:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2018/10/gpg4win-22.png" title="">
<img src="/files/2018/10/gpg4win-22.png" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Sua chave pessoal agora aparece na tela principal do Kleopatra. Agora você pode utilizá-la para assinar a chave pública do openSUSE.</p>

<h2 id="62-assinando-a-chave-pública-do-opensuse">6.2) Assinando a chave pública do openSUSE</h2>

<p>Na tela principal do Kleopatra, selecione a chave pública do openSUSE e clique em <strong>Certificar</strong>:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2018/10/gpg4win-23.png" title="">
<img src="/files/2018/10/gpg4win-23.png" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Na tela seguinte, selecione a opção <strong>Foram verificadas as impressões digitais</strong> (de fato, já fizemos isso lá atrás) e clique em <strong>Next</strong> (Avançar):</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2018/10/gpg4win-24.png" title="">
<img src="/files/2018/10/gpg4win-24.png" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Na tela seguinte, você pode manter a opção padrão marcada (<strong>Certificar somente para mim mesmo</strong>) e clicar em <strong>Certificar</strong>:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2018/10/gpg4win-25.png" title="">
<img src="/files/2018/10/gpg4win-25.png" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Digite a senha da sua chave e clique em <strong>OK</strong>:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2018/10/gpg4win-26.png" title="">
<img src="/files/2018/10/gpg4win-26.png" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>A última tela do assistente confirma que você certificou a chave pública do Projeto openSUSE. Clique em <strong>Terminar</strong>:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2018/10/gpg4win-27.png" title="">
<img src="/files/2018/10/gpg4win-27.png" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<h2 id="63-verificando-novamente-a-autentiticade-da-imagem-iso">6.3) Verificando novamente a autentiticade da imagem ISO</h2>

<p>Repita a verificação de autentiticade da imagem ISO (seção 5). Veja que agora a mensagem apresentada pelo Kleopatra é bem mais assertiva, transmite bem mais segurança:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2018/10/gpg4win-28.png" title="">
<img src="/files/2018/10/gpg4win-28.png" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Repare na última frase: <strong>A assinatura é válida e a validade do certificado é completamente confiável</strong>.</p>

<h2 id="finalizando">Finalizando</h2>

<p>Uma vez instalado, o Gpg4win pode ser usado para verificar as imagens ISO de futuras versões do openSUSE, assim como imagens ISO de outras distribuições, ou quaisquer arquivos que se precise verificar. Como expliquei na visão geral, o processo é semelhante.</p>

<p>Possivelmente, boa parte do que fizemos aqui você não precisará fazer de novo:</p>

<ul>
  <li>você só precisa baixar e instar de novo o Gpg4win (seção 1) se houver uma atualização do Gpg4win;</li>
  <li>você só precisa importar de novo a chave pública do openSUSE (seção 3) se no futuro o openSUSE criar uma nova chave;</li>
  <li>você só precisa assinar de novo a chave pública do openSUSE (seção 6.2) se no futuro importar uma nova chave; e</li>
  <li>se você só utiliza sua chave GPG pessoal para verificar arquivos baixados, não precisará criar um novo par de chaves (seção 6.1).</li>
</ul>

<p>Caso baixe outra imagem ISO do openSUSE (por exemplo, quando houver uma nova versão da distribuição), você repetirá as seções 2, 4 e 5.</p>

<p>Caso baixe uma imagem ISO de outra distribuição, aí sim você vai passar novamente por boa parte do processo: seções 2, 3 (e, opcionalmente, a 6.2), 4 e 5.</p>

<p>Espero que tenha ajudado. Deixo as referências para o caso de você querer ler mais sobre essa ferramenta bem completa que é o Gpg4win.</p>

<h2 id="referências">Referências</h2>

<ul>
  <li><a href="https://www.deepdotweb.com/jolly-rogers-security-guide-for-beginners/how-to-verify-your-downloaded-files-are-authentic/">HOW TO VERIFY YOUR DOWNLOADED FILES ARE AUTHENTIC - Deep Dot Web</a></li>
  <li><a href="https://www.deepdotweb.com/2015/02/21/pgp-tutorial-for-windows-kleopatra-gpg4win/">PGP Tutorial For Windows (Kleopatra - Gpg4Win) - Deep Dot Web</a></li>
  <li><a href="https://www.howtogeek.com/246332/how-to-verify-a-downloaded-linux-iso-file-wasnt-tampered-with/">How to Verify a Linux ISO’s Checksum and Confirm It Hasn’t Been Tampered With</a></li>
  <li><a href="https://bitzuma.com/posts/how-to-verify-an-electrum-download-on-windows/">How to Verify an Electrum Download on Windows - Bitzuma</a></li>
  <li><a href="https://www.gnupg.org/gph/en/manual.html">The GNU Privacy Handbook</a></li>
  <li><a href="https://wiki.gnupg.org/Gpg4win/CheckIntegrity">Gpg4win/CheckIntegrity - GnuPG wiki</a></li>
  <li><a href="https://pt.opensuse.org/SDB:Ajuda_de_download">SDB:Ajuda de download - openSUSE</a></li>
</ul>


        </div>

        
            <!-- AddThis Sharing Buttons -->
            <div class="gap"></div>
            <h2>Gostou? Então compartilha!</h2>
            <div class="addthis_toolbox addthis_default_style addthis_32x32_style">
                <a class="addthis_button_facebook"></a>
                <a class="addthis_button_twitter" data-via="vinyanalista"></a>
                <a class="addthis_button_google_plusone_share"></a>
                <a class="addthis_button_email"></a>
                <a class="addthis_button_favorites"></a>
                <a class="addthis addthis_button_print"></a>
                <a class="addthis_button_pdfonline"></a>
                <a class="addthis_button_compact"></a>
                <a class="addthis_counter addthis_bubble_style"></a>
            </div>
            <!-- AddThis Sharing Buttons End -->
        

        
            <!-- Disqus -->
            <div class="gap"></div>
            <h2>Comentários</h2>
            <div id="disqus_thread"></div>
            <script>
                var disqus_config = function () {
                    this.page.url = 'https://vinyanalista.github.io/blog/2018/10/05/verificacao-de-integridade-e-autenticidade-com-o-gpg4win/';
                };

                (function() {
                    var d = document, s = d.createElement('script');

                    s.src = '//vinyanalista.disqus.com/embed.js';

                    s.setAttribute('data-timestamp', +new Date());
                    (d.head || d.body).appendChild(s);
                })();
            </script>
            <noscript>
                <p><a href="http://www.enable-javascript.com/pt/" target="_blank">Habilite o JavaScript</a> para ver os <a href="https://disqus.com/?ref_noscript" rel="nofollow">comentários providos pelo Disqus</a>.</p>
            </noscript>
            <!-- Disqus End -->
        
    </article>
</div><!-- .blog-post -->

                    </div>
                    <div class="col-sm-4">
                        <div class="card mb-3">
    <div class="card-header">
        <h3><a name="about"></a><a name="author"></a>Sobre mim</h3>
    </div>
    <div class="card-body" itemprop="author" itemscope itemtype="http://schema.org/Person">
        
            <p class="text-center">
                <a href='https://secure.gravatar.com/avatar/5415f4267b44aa9f51b6f89ac4d1656b' title='Antônio Vinícius'>
                    <img src='https://secure.gravatar.com/avatar/5415f4267b44aa9f51b6f89ac4d1656b' alt='Antônio Vinícius' class='img-fluid img-thumbnail rounded-circle'>
                </a>
            </p>
        
        
            <p class="lead text-center" itemprop="name">
                Antônio Vinícius
            </p>
        
        <link itemprop="url" href="https://vinyanalista.github.io">
        <p>
            Aqui tento compartilhar um pouco das minhas experiências como estudante e profissional de TI :)
        </p>
        <p class='text-center'>
            <a href='http://lattes.cnpq.br/2162371468280338' title='Currículo Lattes' itemprop='sameAs'>
                <img src='/assets/img/curriculo_lattes.png' alt='Currículo Lattes' class='img-fluid lattes'>
            </a>
        </p>
        
            <!-- AddThis Follow Buttons -->
            <div class="addthis_toolbox addthis_32x32_style addthis_default_style addthis_follow_buttons text-center">
                
                    <a href="https://facebook.com/pages/vinyanalistacombr/1604841683119097" class="addthis_button_facebook_follow" addthis:userid="pages/vinyanalistacombr/1604841683119097" itemprop="sameAs"></a>
                
                
                    <a href="https://twitter.com/vinyanalista" class="addthis_button_twitter_follow" addthis:userid="vinyanalista" itemprop="sameAs"></a>
                
                
                
                    <a href="https://www.linkedin.com/in/vinyanalista" class="addthis_button_linkedin_follow" addthis:userid="vinyanalista" itemprop="sameAs"></a>
                
                
                    <a href="https://youtube.com/user/viniciusifse" class="addthis_button_youtube_follow" addthis:userid="viniciusifse" itemprop="sameAs"></a>
                
                
                
                    <a href="https://github.com/vinyanalista" class="addthis_button_github_follow" addthis:userid="vinyanalista" itemprop="sameAs"></a>
                
                <a href="/feed.xml" class="addthis_button_rss_follow"></a>
            </div>
            <!-- AddThis Follow Buttons End -->
        
    </div><!-- .card-body -->
</div><!-- .card -->


    <div class="card mb-3">
        <div class="card-body">
            
    <!-- Google AdSense -->
    <ins class="adsbygoogle" id="sidebar_ad_unit"
        style="display:block"
        data-ad-client="ca-pub-5193467168351289"
        data-ad-slot="4511719452"
        data-ad-format="auto"
        data-full-width-responsive="true"></ins>
    <!-- End Google AdSense -->


        </div><!-- .col-xs-12 -->
    </div><!-- .row -->


                    </div>
                </div>
            </div>

            <footer class="footer">
    <div class="container">
        Copyright &copy; 2019 <a href='#author'>Antônio Vinícius</a>. Todos os direitos reservados. Baseado no <a href='https://github.com/vinyanalista/material-jekyll-plus'>Material site template for Jekyll PLUS</a>.
    </div>
</footer>

<meta itemprop="description" content="Por vezes pode ser importante verificar um arquivo obtido da Internet. Duas verificações comuns que reduzem a quase zero as chances de usar um arquivo corrompido ou adulterado são a soma de verificação e a assinatura digital. Nesse post, você verá como fazê-las com o Gpg4win, um software livre gratuito para Windows. Como exemplo, verificaremos...">


    <div itemprop="image" itemscope itemtype="http://schema.org/ImageObject">
        <meta itemprop="url" content="https://vinyanalista.github.io/files/2018/10/gpg4win.png"/>
        <!--<meta itemprop="width" content=""/>--><!-- TODO Image width -->
        <!--<meta itemprop="height" content=""/>--><!-- TODO Image height -->
    </div>



    <meta itemprop="inLanguage" content="pt"/>



    <!-- Disqus -->
    <script id="dsq-count-scr" src="//vinyanalista.disqus.com/count.js" async></script>
    <!-- Disqus End -->



    <!-- Google AdSense -->
    
        
    <!-- Google AdSense -->
    <ins class="adsbygoogle" id="content_ad_unit_2"
        style="display:block"
        data-ad-client="ca-pub-5193467168351289"
        data-ad-slot="7465185857"
        data-ad-format="auto"
        data-full-width-responsive="true"></ins>
    <!-- End Google AdSense -->


    

    <script type="text/javascript">
        adsbygoogle = window.adsbygoogle || [];

        $(document).ready(function(){
            
                var $ad = $('#content_ad_unit_2');
                var $posts = $('.blog-post');
                if (($posts.length > 1) || ($('.blog-archive-title').length > 0)) {
                    // Post listing
                    var post;
                    if ($posts.length > 2) {
                        post = random_number(2, $posts.length);
                    } else {
                        post = 2;
                    }
                    $posts.eq(post - 1).find('.blog-post-content .row').after($ad);
                } else {
                    // Page or post
                    var $paragraphs = $('.blog-post-content p').filter(function() {
                        return ($(this).closest('.no-ads-here').length == 0);
                    });
                    if ($paragraphs.length > 0) {
                        var paragraph;
                        if ($paragraphs.length > 1) {
                            paragraph = random_number(1, $paragraphs.length);
                        } else {
                            paragraph = 1;
                        }
                        $paragraphs.eq(paragraph - 1).after($ad);
                    } else {
                        $ad.remove();
                    }
                }
            
            $('.adsbygoogle').each(function(index, element){
                adsbygoogle.push({});
            });
        });
    </script>
    <!-- Google AdSense End -->



            
        </main>
    </div><!-- .bmd-layout-container -->
</body>
</html>
