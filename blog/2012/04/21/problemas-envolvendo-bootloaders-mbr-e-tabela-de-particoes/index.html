<!DOCTYPE html>
<html lang="pt" prefix="
    addthis: http://www.addthis.com/help/api-spec
    og: http://ogp.me/ns#
    fb: http://ogp.me/ns/fb#
    article: http://ogp.me/ns/article#">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    
        <script type="text/javascript">
            if (("vinyanalista.github.io" == window.location.host) && (window.location.protocol != "https:")) {
                window.location = window.location.toString().replace(/^http:/, "https:");
            }
        </script>
    

    <title>Problemas envolvendo bootloaders, MBR e tabela de partições - Antônio Vinícius</title>
    <meta name="author" content="Antônio Vinícius">
    <meta name="description" content="Gente, a tarde de ontem foi um sufoco! Acidentalmente excluí a tabela de partições de um dos meus HDs, pensei que já tinha perdido todos os meus arquivos e p...">
    <link rel="canonical" href="https://vinyanalista.github.io/blog/2012/04/21/problemas-envolvendo-bootloaders-mbr-e-tabela-de-particoes/">
    <link rel="alternate" type="application/rss+xml" title="Antônio Vinícius" href="https://vinyanalista.github.io/feed.xml" />

    <!-- OpenSearch -->
    <link rel="search" type="application/opensearchdescription+xml" title="Pesquisar em Antônio Vinícius" href="https://vinyanalista.github.io/opensearch.xml" />

    <!-- Open Graph -->
    
        <meta property="article:published_time" content="2012-04-21 05:42:01 -0300"/>
    
    
    
        <meta property="fb:page_id" content="1604841683119097" />
    
    
        <meta property="og:author" content="Antônio Vinícius" />
    
    <meta property="og:description" content="Gente, a tarde de ontem foi um sufoco! Acidentalmente excluí a tabela de partições de um dos meus HDs, pensei que já tinha perdido todos os meus arquivos e p..." />
    
        <meta property="og:image" content="https://vinyanalista.github.io/files/2012/04/computador-maluco.jpg" />
    
    <meta property="og:site_name" content="Antônio Vinícius" />
    <meta property="og:title" content="Problemas envolvendo bootloaders, MBR e tabela de partições" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://vinyanalista.github.io/blog/2012/04/21/problemas-envolvendo-bootloaders-mbr-e-tabela-de-particoes/" />

    <!-- Twitter Cards -->
    <meta name="twitter:card" content="summary" />
    
        <meta name="twitter:site" content="@vinyanalista" />
    

    <!-- Favicons (made with RealFaviconGenerator.net) -->
    <link rel="apple-touch-icon" sizes="180x180" href="https://vinyanalista.github.io/apple-touch-icon.png?v=3">
    <link rel="icon" type="image/png" sizes="32x32" href="https://vinyanalista.github.io/favicon-32x32.png?v=3">
    <link rel="icon" type="image/png" sizes="16x16" href="https://vinyanalista.github.io/favicon-16x16.png?v=3">
    <link rel="manifest" href="https://vinyanalista.github.io/manifest.json?v=3">
    <link rel="mask-icon" href="https://vinyanalista.github.io/safari-pinned-tab.svg?v=3" color="#2196f3">
    <link rel="shortcut icon" href="https://vinyanalista.github.io/favicon.ico?v=3">
    <meta name="theme-color" content="#2196f3">

    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <!--<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-material-design/0.5.10/css/bootstrap-material-design.min.css">-->
    <link rel="stylesheet" href="/libs/bootstrap-material-design/0.5.10/custom/bootstrap-material-design.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-material-design/0.5.10/css/ripples.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/assets/css/syntax.css">
    <link rel="stylesheet" href="/assets/css/main.css">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- JS -->
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-material-design/0.5.10/js/material.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-material-design/0.5.10/js/ripples.min.js"></script>
    <script src="/assets/js/main.js"></script>

    
        <!-- Google Analytics -->
        <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-65333685-1', 'auto');
        ga('send', 'pageview', {
            'page': 'https://vinyanalista.github.io/blog/2012/04/21/problemas-envolvendo-bootloaders-mbr-e-tabela-de-particoes/',
            'title': 'Problemas envolvendo bootloaders, MBR e tabela de partições'
        });

        </script>
        <!-- End Google Analytics -->
    

    
        <!-- Google AdSense -->
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    

    
        <!-- AddThis -->
        <script async src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4f7774466af48b4f"></script>
        <script type="text/javascript">
            var addthis_config = {
                data_track_clickback: true,
                data_track_addressbar: true,
                ui_language: 'pt'
            };
            var addthis_share = {
                url: 'https://vinyanalista.github.io/blog/2012/04/21/problemas-envolvendo-bootloaders-mbr-e-tabela-de-particoes/',
                title: document.title,
                description: 'Gente, a tarde de ontem foi um sufoco! Acidentalmente excluí a tabela de partições de um dos meus HDs, pensei que já tinha perdido todos os meus arquivos e passei várias horas tentando recuperá-la. Tentei ferramentas do Windows, do Linux, e acabei conseguindo. Venho compartilhar nesse post o que houve, como resolvi e algumas observações...'
            };
        </script>
        <!-- End AddThis -->
    
</head>


<body itemscope itemtype="http://schema.org/BlogPosting">

    <!-- Fixed navbar -->
<nav class="navbar navbar-default navbar-fixed-top navbar-with-search" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed pull-left" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Exibir/esconder navegação</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Antônio Vinícius</a>
        </div><!--.navbar-header-->

        <a class="pull-right" id="search-button" title="Pesquisar">
            <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
        </a>

        <div class="collapse navbar-collapse" id="navbar">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="/">Blog</a>
                </li>
                <li>
                    <a href="/blog/category/trabalhos/">Trabalhos</a>
                </li>
                <li>
                    <a href="http://lattes.cnpq.br/2162371468280338">Currículo</a>
                </li>
            </ul>
        </div><!--#navbar-->
    </div><!--.container-->

    <div id="search-bar">
        <div class="container">
            <form action="/search/" id="search-form" method="get" role="search">
                
                
                <div class="input-group">
                    <input  class="form-control" id="search-input" type="text"name="q" placeholder="Pesquisar" />
                    <span class="input-group-btn">
                        <button type="submit" class="btn btn-primary" id="submit-search-button"><span class="glyphicon glyphicon-search"></span></button>
                        <button type="reset" class="btn btn-danger" id="reset-search-button"><span class="glyphicon glyphicon-remove"></span></button>
                    </span>
                </div>
            </form>
        </div>
    </div><!--#search-bar-->
</nav>


    <div class="container">
        <div class="row">
            <div class='col-sm-8'>
                <div class="blog-post panel panel-default">
    <header class="panel-heading">
        <h1 class="blog-post-title" itemprop="headline name">
            <a class="blog-post-link" href="/blog/2012/04/21/problemas-envolvendo-bootloaders-mbr-e-tabela-de-particoes/" itemprop="mainEntityOfPage url">
                Problemas envolvendo bootloaders, MBR e tabela de partições
            </a>
        </h1>
        <div class="blog-post-meta row">
            <div class='col-sm-6'>
                <p class="blog-post-date" itemprop="datePublished" content="2012-04-21">
                    <a href="/blog/2012/04/21/">
                        21 de
                        
                        Abril
                        
                        de 2012
                    </a>
                </p>
                <meta itemprop="dateModified" content="2015-07-06" />
            </div>
            <div class='col-sm-6'>
                
                    <div class='blog-post-share'>
                        <!-- AddThis Sharing Buttons -->
                        <div class="addthis_toolbox addthis_default_style">
                            <a class="addthis_button_facebook"></a>
                            <a class="addthis_button_twitter" data-via="vinyanalista"></a>
                            <a class="addthis_button_google_plusone_share"></a>
                            <a class="addthis_button_favorites"></a>
                            <a class="addthis_button_compact"></a>
                            <a class="addthis_counter addthis_bubble_style"></a>
                        </div>
                        <!-- AddThis Sharing Buttons End -->
                    </div><!-- .blog-post-share -->
                
            </div><!-- .col-sm-6 -->
        </div><!-- .blog-post-meta -->
    </header>

    <article class="blog-post-content panel-body">
        
            <!-- Google AdSense -->
<div class="row">
    <div class="col-xs-12">
        <ins class="adsbygoogle" id="content_ad_unit_1"
            data-ad-client="ca-pub-5193467168351289"
            data-ad-format="auto"
            data-ad-slot="5988452654"></ins>
    </div><!-- .col-xs-12 -->
</div><!-- .row -->
<!-- End Google AdSense -->

        

        <div class="row" itemprop="articleBody mainEntity">
            <div class="col-xs-12">
                <p>Gente, a tarde de ontem foi um sufoco! Acidentalmente excluí a tabela de partições de um dos meus HDs, pensei que já tinha perdido todos os meus arquivos e passei várias horas tentando recuperá-la. Tentei ferramentas do Windows, do Linux, e acabei conseguindo. Venho compartilhar nesse post o que houve, como resolvi e algumas observações curiosas sobre o ocorrido.</p>

<div class='image no-ads-here text-center' itemscope itemtype='http://schema.org/ImageObject'>
<a href='/files/2012/04/computador-maluco.jpg' title=''>
<img src='/files/2012/04/computador-maluco.jpg' alt='' class='img-responsive img-thumbnail' itemprop='contentUrl'>
</a>

</div>

<p>É algo que não desejo a ninguém, mas se algum dia alguém vier a passar pelo que eu passei (ou algo parecido) pode ler as páginas aqui indicadas e ver se alguma das soluções propostas por elas se aplica ao caso.</p>

<!--more-->

<h3>O que aconteceu</h3>

<p>Vou tentar ser breve nessa explicação (realmente é uma longa história, se estiverem mais interessados nas possíveis soluções para o problema, podem pular pros próximos tópicos). Tenho dois HDs, particionados como mostra a saída do comando <code>fdisk</code> no Linux a seguir. Em resumo, são duas partições pros sistemas operacionais (Windows 7 e <a href="http://www.debian.org/">Debian</a>) e duas partições para arquivos pessoais.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">Disk /dev/sdb: 250.1 GB, 250059350016 bytes
255 heads, 63 sectors/track, 30401 cylinders, total 488397168 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x1ba01b9f

Device    Boot      Start         End      Blocks   Id  System
/dev/sdb1            2048   488396799   244197376    7  HPFS/NTFS/exFAT

Disk /dev/sda: 1000.2 GB, 1000204886016 bytes
255 heads, 63 sectors/track, 121601 cylinders, total 1953525168 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0xa1a11ae7

Device    Boot      Start         End      Blocks   Id  System
/dev/sda1            2048   419432447   209715200    7  HPFS/NTFS/exFAT
/dev/sda2       419432448  1468008447   524288000    7  HPFS/NTFS/exFAT
/dev/sda3      1468010496  1887440895   209715200    7  HPFS/NTFS/exFAT
/dev/sda4   *  1887442942  1953523711    33040385    5  Extended
/dev/sda5      1887442944  1953523711    33040384   83  Linux
</code></pre></div>
<p>Como estou pensando em mudar de distribuição, hoje decidi instalar o <a href="http://www.opensuse.org/">openSUSE</a> no lugar do Debian. Gravei o CD do openSUSE, nenhum procedimento de backup, já que estou acostumado a formatações (um erro, admito), iniciei o computador pelo CD, respondi a todas as perguntas do instalador, iniciou-se a cópia dos arquivos, até aí tudo bem.</p>

<p>O problema começou quando percebi que a cópia dos arquivos estava muito lenta. Imaginei que a causa fosse a mídia, o que confirmei quando reiniciei e executei o teste pelo próprio LiveCD (outro erro: iniciar a instalação sem ter verificado antes a mídia).</p>

<p>Só que a essa altura do campeonato o instalador já tinha formatado a partição que antes era do Debian, o <a href="http://www.gnu.org/software/grub/">GRUB</a> tornou-se então inutilizável, o que me impediria de acessar o Windows e gravar um novo CD do openSUSE. Iniciei o computador pelo <a href="http://www.slax.org/">Slax</a> que tenho em um pendrive e tentei gravar o CD do openSUSE por ele usando o <a href="http://k3b.org/">K3B</a> (seria a solução mais prática, já que instalando o openSUSE eu teria o GRUB e o Windows de volta, né?), sem sucesso. Eis que decidi <a href="http://www.cyberciti.biz/faq/linux-how-to-uninstall-grub/">remover o GRUB do HD</a> para que o computador iniciasse diretamente pelo Windows. Aí foi onde eu cometi o erro mais grave de todos.</p>

<p>O comando que eu queria executar deveria apagar apenas o gerenciador de boot (bootloader) do Linux, o GRUB, no entanto ele apagou a MBR inteira, incluindo a tabela de partições. O comando que eu utilizei foi:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text"># dd if=/dev/null of=/dev/sda bs=512 count=1
</code></pre></div>
<p>Quando deveria ser (esses comandos eu obtive <a href="http://www.cyberciti.biz/faq/linux-how-to-uninstall-grub/">aqui</a>, por que o cidadão que escreveu aquele tutorial tinha que ter colocado aquele comando primeiro, hein?):</p>
<div class="highlight"><pre><code class="language-text" data-lang="text"># dd if=/dev/null of=/dev/sda bs=446 count=1
</code></pre></div>
<p>Quando reiniciei o computador, aparece na tela a mensagem de sistema operacional ausente. Foi então que executando o <a href="http://gparted.sourceforge.net/">GParted</a> através de um LiveCD do <a href="http://www.ubuntu.com/">Ubuntu</a> percebi o engano: ele informava que o HD não tinha uma tabela de partições (já citei aqui quatro distribuições, perceberam? rsrsrs).</p>

<h3>Primeiro problema: recuperar a tabela de partições</h3>

<p>Inseri o DVD de instalação do Windows 7 e tentei a recuperação de inicialização, como sugerido por <a href="http://www.howtogeek.com/howto/windows-vista/fixing-bootmgr-is-missing-error-while-trying-to-boot-windows-vista/">esse site</a> (lá você encontra o passo-a-passo com imagens, elas são da instalação do Windows Vista, mas as telas permaneceram iguais na instalação do Windows 7, vou copiar apenas a tela que achei mais importante):</p>

<ol>
<li>Inseri o DVD de instalação do Windows 7 na unidade e iniciei o computador por ele;</li>
<li>Na primeira tela, selecionei meu idioma e meu modelo de teclado e cliquei em “Avançar”;</li>
<li>Cliquei no link “Reparar seu computador”;</li>
<li>Na lista em que ele manda selecionar o sistema operacional, eu não selecionei nenhum (sem a tabela de partições ele não conseguiria identificar o sistema que estava instalado) e cliquei em Avançar;</li>
<li>Eis que apareceu a seguinte tela com as opções de recuperação oferecidas pelo DVD de instalação do Windows 7 (volto a falar dela já já):</li>
</ol>

<div class='image no-ads-here text-center' itemscope itemtype='http://schema.org/ImageObject'>
<a href='/files/2012/04/win7-system-recovery-options.jpg' title='Ferramentas de recuperação disponibilizadas no DVD de instalação do Windows 7'>
<img src='/files/2012/04/win7-system-recovery-options.jpg' alt='Ferramentas de recuperação disponibilizadas no DVD de instalação do Windows 7' class='img-responsive img-thumbnail' itemprop='contentUrl'>
</a>

<em class='caption' itemprop='description'>
<p>Ferramentas de recuperação disponibilizadas no DVD de instalação do Windows 7</p>

</em>

</div>

<p>Eu cliquei em “Startup Repair”, esperei ele concluir o reparo, e após isso, reiniciei o computador, mas nada mudou.</p>

<p>Depois disso iniciei novamente o computador pelo DVD do Windows 7 e tentei reparar manualmente o MBR, como sugerido <a href="http://www.howtogeek.com/howto/32523/how-to-manually-repair-windows-7-boot-loader-problems/">nesse outro site</a>. Os primeiros passos são os mesmos, exceto que, chegando na tela da imagem acima, ao invés de clicar em “Startup Repair” eu cliquei em “Command Prompt” para digitar os comandos manualmente. Tentei o seguinte comando, reiniciei pra ver se algo mudou, e vi que o erro permanecia.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&gt; bootrec /fixmbr
</code></pre></div>
<p>Repeti os passos, executei esse outro comando, reiniciei novamente, e nada mudou:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&gt; bootrec /fixboot
</code></pre></div>
<p>Por último, testei esse outro comando de terminal sugerido <a href="http://www.ehow.com/how_4836283_repair-mbr-windows.html">nessa página</a>, seguindo praticamente os mesmos procedimentos (só mudou o comando, claro), e aparentemente nada mudou, de novo:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&gt; bootsect /nt60 all
</code></pre></div>
<p>Inseri o LiveCD do Ubuntu na unidade e iniciei o Linux por ele. Já estava disposto a tentar alguma ferramenta Linux, quando abri o <a href="http://live.gnome.org/Nautilus">Nautilus</a> e verifiquei que todas as partições estavam listadas. Eu as abri, abri algumas pastas, abri alguns arquivos, tudo aparentemente estava no lugar.</p>

<p>Apenas a título de curiosidade, gostaria de listar as duas soluções que (talvez) fossem possíveis no Linux (não cheguei a precisar delas, já que consegui me virar com o DVD do Windows 7, e sinceramente, não sei se pretendo repetir as condições necessárias para testá-las): <a href="http://ubuntuforums.org/showthread.php?t=370121">gpart</a>, um programa que você pode instalar no Ubuntu (há <a href="http://www.hardware.com.br/dicas/fazendo-backup-recuperando-mbr-tabela-particoes.html">essa outra página</a> um tanto desatualizada do Morimoto que também fala dele) que, pelo que eu entendi, lê o HD inteiro e tenta recompor a tabela de partições dele</p>

<p>Bom, que alívio! Algum dos procedimentos anteriores (não sei qual) recuperou minhas partições. Talvez eu tivesse que instalar novamente o Windows e o Linux, mas meus dados ao menos já estavam salvos. Devolvida a tabela de partições ao HD, agora eu tinha que recuperar a outra parte do MBR: o gerenciador de boot (bootloader).</p>

<h3>Segundo problema: recuperar o gerenciador de boot</h3>

<p>Recuperadas as partições, agora eu poderia gravar o CD do openSUSE e continuar com a instalação, mas antes eu precisaria acessar o sistema operacional. Então, eu precisaria que pelo menos o bootloader do Windows estivesse funcionando. Com a tabela de partições comprovadamente recuperada, voltei a tentar os procedimentos acima descritos usando o DVD de instalação do Windows 7, e <strong>nada</strong>!</p>

<p>Eis que decidi instalar o Ubuntu para ter ao menos um sistema operacional funcionando no meu disco rígido (no caso, instalei o Ubuntu na partição Linux que antes era do Debian e que eu desejava que fosse então do openSUSE). A instalação devolveu o GRUB ao MBR e, por incrível que pareça, o GRUB listava o Windows 7 juntamente com o Ubuntu como sistemas operacionais disponíveis.</p>

<h3>Terceiro problema: recuperar a inicialização do Windows</h3>

<p>Imaginava que agora eu conseguiria acessar o Windows, mas esbarrei em um novo problema. A tela exibida quando eu iniciava o computador e escolhia o Windows na lista do GRUB era a seguinte (clique na imagem para ampliar):</p>

<div class='image no-ads-here text-center' itemscope itemtype='http://schema.org/ImageObject'>
<a href='/files/2012/04/erro-0xc000000e.jpg' title='Erro 0xc000000e'>
<img src='/files/2012/04/erro-0xc000000e.jpg' alt='Erro 0xc000000e' class='img-responsive img-thumbnail' itemprop='contentUrl'>
</a>

<em class='caption' itemprop='description'>
<p>Erro 0xc000000e</p>

</em>

</div>

<p>Mais uma rodada de tentativas executando aqueles comandos que eu mostrei acima, e dessa vez houve algum resultado: só que o sistema ainda não funcionou, o erro foi que mudou. Agora a tela exibia:</p>

<div class='image no-ads-here text-center' itemscope itemtype='http://schema.org/ImageObject'>
<a href='/files/2012/04/erro-bootmgr.png' title='BOOTMGR is missing'>
<img src='/files/2012/04/erro-bootmgr.png' alt='BOOTMGR is missing' class='img-responsive img-thumbnail' itemprop='contentUrl'>
</a>

<em class='caption' itemprop='description'>
<p>BOOTMGR is missing</p>

</em>

</div>

<p>Encontrei algumas soluções na Internet, mas decidi tentar primeiro a que tinha <a href="http://support.microsoft.com/kb/2622803">no site da Microsoft</a>: tentei o método 2 fornecido nessa página, que consiste em executar, da mesma forma que os comandos anteriores, o comando:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&gt; Bootrec /RebuildBcd
</code></pre></div>
<p>Executei, reiniciei o computador e, novamente, <strong>nada</strong>! Em dois fóruns (<a href="http://www.tomshardware.com/forum/6610-63-0xc000000e-caused-media-drive">aqui</a> e <a href="http://forum.clubedohardware.com.br/resolvido-bootmgr-is/674691">aqui</a>) eu vi a sugestão de desconectar todos os HDs e dispositivos removíveis (pendrives, cartões de memória, etc.) antes de executar o comando acima, deixando apenas o disco que se quer recuperar. Desliguei meu computador, abri o gabinete, retirei o cabo de força do outro HD que eu tenho, tirei o pendrive que tinha o Slax, reiniciei o procedimento e... <strong>nada</strong>!</p>

<p>A última sugestão que eu tentei foi a solução definitiva. <a href="http://www.pcdicasuteis.com/bootmgr-is-missing-press-ctrlaltdel-to-restart-windows-7">Nesse site</a>, eles indicam copiar o arquivo BOOTMGR do DVD de instalação do Windows pro HD no qual ele está faltando. Eu iniciei o computador por esse DVD, abri o terminal (como indicado acima) e executei os seguintes comandos (suponha que <code>D:</code> seja a sua unidade de CD/DVD na qual se encontra o DVD de instalação do Windows 7 e <code>C:</code> seja o disco rígido que você pretende reparar):</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&gt; cd D:
&gt; copy bootmgr C:
</code></pre></div>
<p>Simples assim! Reiniciei o computador e ele carregou o sistema operacional do mesmo jeito que estava antes.</p>

<h3>Quarto problema: recuperar o GRUB (de novo)</h3>

<p>Só que essa solução me trouxe dois problemas: o GRUB sumiu (imagina só: agora que eu consegui acessar o Windows, não consigo mais acessar o Linux!) e aquela imagem da bandeira do Windows brilhando não aparece mais na inicialização, ao invés disso, é a barra verde do Vista (isso não chega a ser um problema, mas não deveria acontecer, veja nas imagens a seguir o antes e o depois).</p>

<div class='image no-ads-here text-center' itemscope itemtype='http://schema.org/ImageObject'>
<a href='/files/2012/04/win7-boot.jpg' title='O que aparecia antes enquanto o Windows 7 era carregado'>
<img src='/files/2012/04/win7-boot.jpg' alt='O que aparecia antes enquanto o Windows 7 era carregado' class='img-responsive img-thumbnail' itemprop='contentUrl'>
</a>

<em class='caption' itemprop='description'>
<p>O que aparecia antes enquanto o Windows 7 era carregado</p>

</em>

</div>

<div class='image no-ads-here text-center' itemscope itemtype='http://schema.org/ImageObject'>
<a href='/files/2012/04/winvista-boot.jpg' title='O que aparece agora'>
<img src='/files/2012/04/winvista-boot.jpg' alt='O que aparece agora' class='img-responsive img-thumbnail' itemprop='contentUrl'>
</a>

<em class='caption' itemprop='description'>
<p>O que aparece agora</p>

</em>

</div>

<p>Eu poderia <a href="http://www.vivaolinux.com.br/dica/Restaurando-o-GRUB-apos-a-instalacao-de-outro-sistema-operacional">facilmente recuperar o GRUB</a> para conseguir acessar o Linux, mas como a instalação do Ubuntu era provisória, preferi gravar o CD do openSUSE e instalá-lo por cima do Ubuntu, o que devolveu o GRUB ao MBR e o atualizou para fornecer o Windows 7 e o openSUSE como opções. Desliguei o computador, devolvi o cabo de força do outro HD, liguei de novo pra ver se estava tudo bem, ele reconheceu o “novo” disco rígido… Agora está tudo como era antes, e com o Linux novo, como eu queria.</p>

<p>Antes de instalar o openSUSE, obviamente, eu fiz uma <a href="http://www.hardware.com.br/dicas/fazendo-backup-recuperando-mbr-tabela-particoes.html">cópia do MBR</a>, já pensou se eu tivesse problemas com isso de novo? Para isso, usei o próprio LiveCD do openSUSE, executando o seguinte comando como root em uma janela de terminal (suponha que <code>/dev/sda</code> seja o caminho para o HD cujo MBR você deseja copiar):</p>
<div class="highlight"><pre><code class="language-text" data-lang="text"># dd if=/dev/sda of=backup.mbr bs=512 count=1
</code></pre></div>
<p>Aqui fica uma dica aos que um dia precisarem fazer algum dia o backup de um MBR: por motivos óbvios, você não deve salvar esse backup no mesmo disco (não falo na mesma partição não, é no mesmo disco, mesmo!). Se acidentalmente o MBR desse disco for excluído, como você vai conseguir acessar dentro do disco o arquivo que contém o backup para restaurá-lo? O trauma com essa experiência foi tão grande que o backup que eu fiz do MBR eu salvei nos meus dois pendrives.</p>

<h3>Considerações finais (e minhas observações)</h3>

<p>Tudo bem que o problema inicial foi causado por falha humana (e, diga-se de passagem, minha), no entanto, eu observei que alguns dos problemas durante a tentativa de correção foram causados pela <strong>insuficiência das soluções propostas</strong> em diversos lugares na Internet, seja em termos de <strong>eficiência</strong> (nenhuma delas corrigia o problema por completo), seja em termos de <strong>documentação</strong> (cada página poderia explicar o porquê de estarmos usando aquela ou outra solução, ou talvez até haja informação sobre cada uma dessas soluções, mas a urgência em resolver o problema e a falta de tempo em procurar explicações pesaram mais). Isso pode ter me levado a executar um comando ou outro em um momento inapropriado e pode ter adiado o desfecho da história por mais algumas etapas. Mesmo a documentação oficial da Microsoft oferece algumas possíveis soluções para problemas muito semelhantes.</p>

<p>Bem, em relação à documentação, achei bastante interessante a cooperação entre os usuários. Um dos detalhes fundamentais à solução do meu problema eu achei <a href="http://forum.clubedohardware.com.br/resolvido-bootmgr-is/674691">em um fórum</a> e a solução final eu achei <a href="http://www.pcdicasuteis.com/bootmgr-is-missing-press-ctrlaltdel-to-restart-windows-7">em um blog</a>. Fico feliz de ver que as pessoas na Internet estão dispostas a ajudar umas as outras e que a solução do problema de uma pessoa serve para outras, <strong>a Internet é um ambiente colaborativo</strong>. Por isso estou compartilhando aqui o que aconteceu comigo, talvez esse texto, contendo as indicações dos links que eu visitei, possa servir a alguém.</p>

<p>Outra observação curiosa que eu fiz foi que as ferramentas da Microsoft só conseguiram recuperar a inicialização do Windows depois que o GRUB voltou a funcionar corretamente, com a instalação do Linux; no entanto, a correção do Windows removeu o GRUB do MBR, impedindo o acesso ao Linux (que bela forma de agradecer o favor, né? rsrsrsrs) Na minha opinião, <strong>as ferramentas da Microsoft deveriam ser suficientes para recuperar ao menos o Windows</strong>. Se as pessoas que não usam Linux passassem por um problema desses (imagine o MBR sendo destruído por um vírus, por exemplo), talvez não conseguissem recuperar o sistema e acabassem formatando.</p>

<p>Finalmente, algo inusitado foi <strong>a remoção do arquivo BOOTMGR da partição do Windows</strong>. Nenhuma das páginas que eu consultei me instruiu a excluí-lo (nem eu o fiz, ao menos não que eu soubesse). Isso significa que alguma das ferramentas que eu utilizei para tentar recuperar o Windows acabou excluindo esse arquivo acidentalmente. Ferramentas que resolvem um problema e criam outro não são realmente de grande utilidade…</p>

<p>E que esse post sirva para refletir sobre <strong>o trabalho e a responsabilidade de um técnico</strong>: eu ainda sabia o que provocou o erro (até porque fui eu mesmo que causei), mas imagina tentar entender a explicação de um usuário! Vejam também quanta mão-de-obra e quanta paciência requer resolver um problema desses! Como nada é muito bem documentado, eu tive que resolver meu problema na base da tentativa e erro! Muitos “técnicos” simplesmente se limitariam a formatar o computador e obrigar o usuário a reaver (ou refazer, o que seria pior) tudo aquilo que tinha, quando uma solução menos danosa era possível e ele não tentou o bastante!</p>

<p>Um abraço a todos, e até a próxima aventura deste técnico que vos escreve! E espero que alguém mais entendido possa me esclarecer o motivo da confusão. Não a confusão “do início”, que fui eu que causei, mas a confusão “do meio”, imagino que a solução do meu problema não deveria ter tantos arrodeios, já que a maioria dos usuários relatam que um ou dois comandos deveriam resolver os problemas (podem conferir nos links que eu mencionei ao longo da resolução)...</p>

            </div>
        </div>

        
            <!-- AddThis Sharing Buttons -->
            <div class="gap"></div>
            <h2>Gostou? Então compartilha!</h2>
            <div class="addthis_toolbox addthis_default_style addthis_32x32_style">
                <a class="addthis_button_facebook"></a>
                <a class="addthis_button_twitter"></a>
                <a class="addthis_button_google_plusone_share"></a>
                <a class="addthis_button_email"></a>
                <a class="addthis_button_favorites"></a>
                <a class="addthis addthis_button_print"></a>
                <a class="addthis_button_pdfonline"></a>
                <a class="addthis_button_compact"></a>
                <a class="addthis_counter addthis_bubble_style"></a>
            </div>
            <!-- AddThis Sharing Buttons End -->
        

        
            <!-- Disqus -->
            <div class="gap"></div>
            <h2>Comentários</h2>
            <div class="row">
                <div class="col-xs-12">
                    <div id="disqus_thread"></div>
                    <script type="text/javascript">
                        /* * * CONFIGURATION VARIABLES * * */
                        var disqus_shortname = 'vinyanalista';
                        var disqus_url = 'https://vinyanalista.github.io/blog/2012/04/21/problemas-envolvendo-bootloaders-mbr-e-tabela-de-particoes/';

                        /* * * DON'T EDIT BELOW THIS LINE * * */
                        (function() {
                            var dsq = document.createElement('script');
                            dsq.type = 'text/javascript';
                            dsq.async = true;
                            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                        })();
                    </script>
                    <noscript>
                        <p><a href="http://www.enable-javascript.com/pt/" target="_blank">Habilite o JavaScript</a> para ver os <a href="https://disqus.com/?ref_noscript" rel="nofollow">comentários providos pelo Disqus</a>.</p>
                    </noscript>
                </div><!-- .col-xs-12 -->
            </div><!-- .row -->
            <!-- Disqus End -->
        
    </article>
</div><!-- .blog-post -->

            </div>
            <div class="col-sm-4">
                <div class="panel panel-default">
    <div class="panel-heading">
        <h3><a name="author"></a>Sobre mim</h3>
    </div>
    <div itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
            <meta itemprop="url" content="https://vinyanalista.github.io/favicon.png" />
            <!--<meta itemprop="width" content=""/>--><!-- TODO Image width -->
            <!--<meta itemprop="height" content=""/>--><!-- TODO Image height -->
        </div>
        <meta itemprop="url" content="https://vinyanalista.github.io" />
        <meta itemprop="name" content="Antônio Vinícius" />
        <meta itemprop="description" content="Aqui tento compartilhar um pouco das minhas experiências como estudante e profissional de TI :)" />
    </div>
    <div class="panel-body" itemprop="author" itemscope itemtype="http://schema.org/Person">
        
            <p class="text-center">
                <a href='https://secure.gravatar.com/avatar/5415f4267b44aa9f51b6f89ac4d1656b' title='Antônio Vinícius'>
                    <img src='https://secure.gravatar.com/avatar/5415f4267b44aa9f51b6f89ac4d1656b' alt='Antônio Vinícius' class='img-circle img-responsive img-thumbnail'>
                </a>
            </p>
        
        
            <p class="lead text-center" itemprop="name">
                Antônio Vinícius
            </p>
        
        <link itemprop="url" href="https://vinyanalista.github.io">
        <p class="text">
            Aqui tento compartilhar um pouco das minhas experiências como estudante e profissional de TI :)
        </p>
        <p class='text-center'>
            <a href='http://lattes.cnpq.br/2162371468280338' title='Currículo Lattes' itemprop='sameAs'>
                <img src='/assets/img/curriculo_lattes.png' alt='Currículo Lattes' class='img-responsive lattes'>
            </a>
        </p>
        
            <!-- AddThis Follow Buttons -->
            <div class="addthis_toolbox addthis_32x32_style addthis_default_style center-block">
                
                    <a href="https://facebook.com/pages/vinyanalistacombr/1604841683119097" class="addthis_button_facebook_follow" addthis:userid="" itemprop="sameAs"></a>
                
                
                    <a href="https://twitter.com/vinyanalista" class="addthis_button_twitter_follow" addthis:userid="vinyanalista" itemprop="sameAs"></a>
                
                
                    <a href="https://www.linkedin.com/in/vinyanalista" class="addthis_button_linkedin_follow" addthis:userid="vinyanalista" itemprop="sameAs"></a>
                
                
                    <a href="https://plus.google.com/112036205302761713933" class="addthis_button_google_follow" addthis:userid="112036205302761713933" itemprop="sameAs"></a>
                
                
                    <a href="https://youtube.com/user/viniciusifse" class="addthis_button_youtube_follow" addthis:userid="viniciusifse" itemprop="sameAs"></a>
                
                
                
                    <a href="https://github.com/vinyanalista" class="addthis_button_github_follow" addthis:userid="vinyanalista" itemprop="sameAs"></a>
                
                <a href="/feed.xml" class="addthis_button_rss_follow"></a>
            </div>
            <!-- AddThis Follow Buttons End -->
        
    </div><!-- .panel-body -->
</div><!-- .panel -->


    <div class="panel panel-default">
        <div class="panel-body">
            <!-- Google AdSense -->
<div class="row">
    <div class="col-xs-12">
        <ins class="adsbygoogle" id="sidebar_ad_unit"
            data-ad-client="ca-pub-5193467168351289"
            data-ad-format="auto"
            data-ad-slot="4511719452"></ins>
    </div><!-- .col-xs-12 -->
</div><!-- .row -->
<!-- End Google AdSense -->

        </div><!-- .col-xs-12 -->
    </div><!-- .row -->


            </div>
        </div>
    </div>

    <footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-xs-12">
                <p class="text-center">
                    Copyright &copy; 2017 <a href='#author'>Antônio Vinícius</a>. Todos os direitos reservados. Baseado no <a href='https://github.com/vinyanalista/material-jekyll-plus'>Material site template for Jekyll PLUS</a>.
                </p>
            </div>
        </div>
    </div>
</footer>

<meta itemprop="description" content="Gente, a tarde de ontem foi um sufoco! Acidentalmente excluí a tabela de partições de um dos meus HDs, pensei que já tinha perdido todos os meus arquivos e passei várias horas tentando recuperá-la. Tentei ferramentas do Windows, do Linux, e acabei conseguindo. Venho compartilhar nesse post o que houve, como resolvi e algumas observações...">


    <div itemprop="image" itemscope itemtype="http://schema.org/ImageObject">
        <meta itemprop="url" content="https://vinyanalista.github.io/files/2012/04/computador-maluco.jpg"/>
        <!--<meta itemprop="width" content=""/>--><!-- TODO Image width -->
        <!--<meta itemprop="height" content=""/>--><!-- TODO Image height -->
    </div> 



    <meta itemprop="inLanguage" content="pt"/>



    <!-- Disqus -->
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES * * */
        
            var disqus_config = function () {
                this.language = "pt";
            };
        
        var disqus_shortname = 'vinyanalista';
        
        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script'); s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <!-- Disqus End -->



    <!-- Google AdSense -->
    
        <!-- Google AdSense -->
<div class="row">
    <div class="col-xs-12">
        <ins class="adsbygoogle" id="content_ad_unit_2"
            data-ad-client="ca-pub-5193467168351289"
            data-ad-format="auto"
            data-ad-slot="7465185857"></ins>
    </div><!-- .col-xs-12 -->
</div><!-- .row -->
<!-- End Google AdSense -->

    

    <script type="text/javascript">
        adsbygoogle = window.adsbygoogle || [];

        $(document).ready(function(){
            
                var $ad = $('#content_ad_unit_2').closest('.row');
                var $posts = $('.blog-post');
                if (($posts.length > 1) || ($('.blog-archive-title').length > 0)) {
                    // Post listing
                    var post;
                    if ($posts.length > 2) {
                        post = random_number(2, $posts.length);
                    } else {
                        post = 2;
                    }
                    $posts.eq(post - 1).find('.blog-post-content .row').after($ad);
                } else {
                    // Page or post
                    var $paragraphs = $('.blog-post-content p').filter(function() {
                        return ($(this).closest('.no-ads-here').length == 0);
                    });
                    if ($paragraphs.length > 0) {
                        var paragraph;
                        if ($paragraphs.length > 1) {
                            paragraph = random_number(1, $paragraphs.length);
                        } else {
                            paragraph = 1;
                        }
                        $paragraphs.eq(paragraph - 1).after($ad);
                    } else {
                        $ad.remove();
                    }
                }
            
            $('.adsbygoogle').each(function(index, element){
                adsbygoogle.push({});
            });
        });
    </script>
    <!-- Google AdSense End -->



</body>
</html>
