<!DOCTYPE html>
<html lang="pt" prefix="
    addthis: http://www.addthis.com/help/api-spec
    og: http://ogp.me/ns#
    fb: http://ogp.me/ns/fb#
    article: http://ogp.me/ns/article#">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    
        <script type="text/javascript">
            if (("vinyanalista.github.io" == window.location.host) && (window.location.protocol != "https:")) {
                window.location = window.location.toString().replace(/^http:/, "https:");
            }
        </script>
    

    <title>Configurando um datasource do MySQL no JBoss AS - Antônio Vinícius</title>
    <meta name="author" content="Antônio Vinícius">
    <meta name="description" content="O MySQL é um banco de dados de código aberto desenvolvido pela Oracle. Ele se tornou um dos bancos de dados mais utilizados no mundo devido ao fato de se int...">
    <link rel="canonical" href="https://vinyanalista.github.io/blog/2012/07/19/configurando-um-datasource-do-mysql-no-jboss-as/">
    <link rel="alternate" type="application/rss+xml" title="Antônio Vinícius" href="https://vinyanalista.github.io/feed.xml" />

    <!-- OpenSearch -->
    <link rel="search" type="application/opensearchdescription+xml" title="Pesquisar em Antônio Vinícius" href="https://vinyanalista.github.io/opensearch.xml" />

    <!-- Open Graph -->
    
        <meta property="article:published_time" content="2012-07-19 04:36:13 -0300"/>
        
            <meta property="article:publisher" content="https://facebook.com/pages/vinyanalistacombr/1604841683119097" />
        
    
    
    
        <meta property="fb:page_id" content="1604841683119097" />
    
    <meta property="og:description" content="O MySQL é um banco de dados de código aberto desenvolvido pela Oracle. Ele se tornou um dos bancos de dados mais utilizados no mundo devido ao fato de se int..." />
    
        <meta property="og:image" content="https://vinyanalista.github.io/files/2012/07/jboss_as_mysql_01.jpg" />
    
    <meta property="og:site_name" content="Antônio Vinícius" />
    <meta property="og:title" content="Configurando um datasource do MySQL no JBoss AS" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://vinyanalista.github.io/blog/2012/07/19/configurando-um-datasource-do-mysql-no-jboss-as/" />

    <!-- Twitter Cards -->
    <meta name="twitter:card" content="summary" />
    
        <meta name="twitter:site" content="@vinyanalista" />
    

    <!-- Favicons (made with RealFaviconGenerator.net) -->
    <link rel="apple-touch-icon" sizes="180x180" href="https://vinyanalista.github.io/apple-touch-icon.png?v=4">
    <link rel="icon" type="image/png" sizes="32x32" href="https://vinyanalista.github.io/favicon-32x32.png?v=4">
    <link rel="icon" type="image/png" sizes="16x16" href="https://vinyanalista.github.io/favicon-16x16.png?v=4">
    <link rel="manifest" href="https://vinyanalista.github.io/site.webmanifest?v=4">
    <link rel="mask-icon" href="/safari-pinned-tab.svg?v=4" color="#2196f3">
    <link rel="shortcut icon" href="https://vinyanalista.github.io/favicon.ico?v=4">
    <meta name="msapplication-TileColor" content="#2196f3">
    <meta name="theme-color" content="#2196f3">

    <!-- CSS -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Material+Icons">
    
        <!--<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">-->
        <!--<link rel="stylesheet" href="https://unpkg.com/bootstrap-material-design@4.1.2/dist/css/bootstrap-material-design.min.css" integrity="sha384-dI6l3oYG+wVvjfdlixt6+FMddrb9+uejLU/wMhQFKklk7RDtSDBfe/XuF1dkcgVV" crossorigin="anonymous">-->
        <link rel="stylesheet" href="/libs/bootstrap-material-design/4.1.2/custom/bootstrap-material-design.min.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous">
    
    <link rel="stylesheet" href="/assets/css/syntax.css">
    <link rel="stylesheet" href="/assets/css/main.css">

    <!-- JS -->
    
        <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha256-pasqAKBDmFT4eHoN2ndd6lN370kFiGUFyTiUHWhU7k8=" crossorigin="anonymous"></script>
        <script src="https://unpkg.com/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha256-x3YZWtRjM8bJqf48dFAv/qmgL68SI4jqNWeSLMZaMGA=" crossorigin="anonymous"></script>
        <!--<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>-->
        <script src="https://unpkg.com/bootstrap-material-design@4.1.2/dist/js/bootstrap-material-design.min.js" integrity="sha384-aWO+CcMRDQLEvnT8RdnCxWbs4C76Ryoo4pzYpGNW2vlHTHiPA7gpBzIB5nYwYfLg" crossorigin="anonymous"></script>
    
    <script src="/assets/js/main.js"></script>

    
        <!-- Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-65333685-1"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'UA-65333685-1');
        </script>
        <!-- End Google Analytics -->
    

    
        <!-- Google AdSense -->
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    

    
        <!-- AddThis -->
        <script async src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4f7774466af48b4f"></script>
        <script type="text/javascript">
            var addthis_config = {
                data_track_clickback: true,
                data_track_addressbar: true,
                ui_language: 'pt'
            };
            var addthis_share = {
                url: 'https://vinyanalista.github.io/blog/2012/07/19/configurando-um-datasource-do-mysql-no-jboss-as/',
                title: document.title,
                description: 'O MySQL é um banco de dados de código aberto desenvolvido pela Oracle. Ele se tornou um dos bancos de dados mais utilizados no mundo devido ao fato de se integrar perfeitamente ao PHP, sendo oferecido pela maioria dos serviços de hospedagem de sites em conjunto com o suporte a essa linguagem. Nesse post, você...'
            };
        </script>
        <!-- End AddThis -->
    
</head>


<body itemscope itemtype="http://schema.org/BlogPosting">
    <div class="bmd-layout-container bmd-drawer-f-l bmd-drawer-overlay">
        <!-- Fixed navbar -->
<nav class="navbar navbar-expand-md navbar-dark fixed-top bg-primary">
    <div class="container">
        <button type="button" class="navbar-toggler" data-toggle="drawer" data-target="#drawer">
            <span class="sr-only">Exibir/esconder navegação</span>
            <i class="material-icons">menu</i>
        </button>

        <a class="navbar-brand" href="/">Antônio Vinícius</a>

        <div class="collapse navbar-collapse" id="navbar">
            <ul class="navbar-nav m-auto">
                <li class="nav-item">
                    <a class="nav-link" href="/">Blog</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/blog/category/trabalhos/">Trabalhos</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="http://lattes.cnpq.br/2162371468280338">Currículo</a>
                </li>
            </ul>
            <form action="/search/" class="form-inline" id="navbar-search-form" method="get" role="search">
                
                
                <div class="input-group">
                    <input class="form-control search-field" id="navbar-search-field" name="q" placeholder="Pesquisar" type="text" aria-label="Pesquisar">
                    <div class="input-group-append">
                        <button class="btn btn-secondary btn-number search-button" id="navbar-search-button" type="submit">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>
                </div>
            </form>
        </div><!--#navbar-->
    </div><!--.container-->
</nav>

        <!-- Navigation drawer -->
<div id="drawer" class="bmd-layout-drawer bg-faded">
    <header>
        <a class="navbar-brand" href="/">Antônio Vinícius</a>
    </header>
    <form action="/search/" class="form-inline border-top" id="drawer-search-form" method="get" role="search">
        
        
        <div class="bmd-form-group-sm">
            <div class="input-group">
                <input class="form-control search-field" id="drawer-search-field" name="q" placeholder="Pesquisar" type="text" aria-label="Pesquisar">
                <div class="input-group-append">
                    <button class="btn btn-secondary btn-number search-button" id="drawer-search-button" type="submit">
                        <i class="fa fa-search"></i>
                    </button>
                </div>
            </div><!-- .input-group -->
        </div><!-- .bmd-form-group-sm -->
    </form>
    <ul class="list-group list-group-flush border-top" id="drawer-links">
        <li class="list-group-item">
            <a class="nav-link" href="/">Blog</a>
        </li>
        <li class="list-group-item">
            <a class="nav-link" href="/blog/category/trabalhos/">Trabalhos</a>
        </li>
        <li class="list-group-item">
            <a class="nav-link" href="http://lattes.cnpq.br/2162371468280338">Currículo</a>
        </li>
    </ul>
</div>


        <main class="bmd-layout-content">
            <div class="container" id="main-container">
                <div class="row">
                    <div class='col-sm-8'>
                        <div class="blog-post card mb-3">
    <header class="card-header">
        <h1 class="blog-post-title" itemprop="headline name">
            <a class="blog-post-link" href="/blog/2012/07/19/configurando-um-datasource-do-mysql-no-jboss-as/" itemprop="mainEntityOfPage url">
                Configurando um datasource do MySQL no JBoss AS
            </a>
        </h1>
        <div class="blog-post-meta row">
            <div class='col-sm-6'>
                <p class="blog-post-date" itemprop="datePublished" content="2012-07-19">
                    <a href="/blog/2012/07/19/">
                        19 de
                        
                        Julho
                        
                        de 2012
                    </a>
                </p>
                <meta itemprop="dateModified" content="2015-07-06" />
            </div>
            <div class='col-sm-6'>
                
                    <div class='blog-post-share'>
                        <!-- AddThis Sharing Buttons -->
                        <div class="addthis_toolbox addthis_default_style">
                            <a class="addthis_button_facebook"></a>
                            <a class="addthis_button_twitter" data-via="vinyanalista"></a>
                            <a class="addthis_button_google_plusone_share"></a>
                            <a class="addthis_button_favorites"></a>
                            <a class="addthis_button_compact"></a>
                            <a class="addthis_counter addthis_bubble_style"></a>
                        </div>
                        <!-- AddThis Sharing Buttons End -->
                    </div><!-- .blog-post-share -->
                
            </div><!-- .col-sm-6 -->
        </div><!-- .blog-post-meta -->
    </header>

    <article class="blog-post-content card-body">
        
            
    <!-- Google AdSense -->
    <ins class="adsbygoogle" id="content_ad_unit_1"
        style="display:block"
        data-ad-client="ca-pub-5193467168351289"
        data-ad-slot="5988452654"
        data-ad-format="auto"
        data-full-width-responsive="true"></ins>
    <!-- End Google AdSense -->


        

        <div itemprop="articleBody mainEntity">
            <p>O <a href="http://www.mysql.com/">MySQL</a> é um banco de dados de código aberto desenvolvido pela <a href="http://www.oracle.com/">Oracle</a>. Ele se tornou um dos bancos de dados mais utilizados no mundo devido ao fato de se integrar perfeitamente ao <a href="http://www.php.net/">PHP</a>, sendo oferecido pela maioria dos serviços de hospedagem de sites em conjunto com o suporte a essa linguagem. Nesse post, você verá como utilizá-lo em conjunto com o servidor de aplicação <a href="http://www.jboss.org/jbossas/">JBoss AS</a> para satisfazer as necessidades de armazenamento de dados de suas aplicações <a href="http://www.oracle.com/technetwork/java/javaee/">Java EE</a>.</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2012/07/jboss_as_mysql_01.jpg" title="">
<img src="/files/2012/07/jboss_as_mysql_01.jpg" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Aqui também há uma dica para usuários do banco de dados <a href="http://www.postgresql.org/">PostgreSQL</a> que quiserem fazer o mesmo: leiam o final do post!</p>

<!--more-->

<p>No <a href="/blog/2012/07/18/apresentando-o-servidor-de-aplicacao-jboss-as-7/">post anterior</a>, você foi apresentado ao JBoss AS. Nesse post, veremos como configurar nele uma conexão com o MySQL, e veremos também como configurar uma aplicação Java EE para utilizar essa conexão. Para fins didáticos, vou supor que você possui o JBoss AS e o MySQL instalados em seu computador, e que você criou uma base de dados chamada “teste” (para esse passo-a-passo a estrutura da base de dados não é importante, focaremos na conexão).</p>

<p>Há outras páginas na Internet que explicam exatamente o que vou explicar aqui (como <a href="https://zorq.net/b/2011/07/12/adding-a-mysql-datasource-to-jboss-as-7/">essa</a>, <a href="http://www.messiasbittencourt.com/168/jboss-7-mysql/">essa</a>, <a href="http://filosofisto.wordpress.com/2012/02/13/configurando-mysql-no-jboss-7-as/">essa</a> e <a href="http://jbossdivers.wordpress.com/2012/01/20/introducao-ao-jboss-as-7-parte-2/">essa</a>, e aproveito para dizer que essas foram algumas das minhas referências na elaboração desse post), porém aqui proponho uma abordagem diferente, que só percebi que era possível quando li mais atentamente o <a href="https://docs.jboss.org/author/display/AS7/Admin+Guide#AdminGuide-Datasources">guia de administração do JBoss AS</a> (a referência que encerra a lista): realizar toda a configuração da conexão pelo console Web de administração do servidor.</p>

<p>Dividirei a explicação em 3 etapas: fazer deploy do driver JDBC, criação do datasource e configurar a aplicação Web para utilizar esse datasource. As explicações aqui fornecidas se aplicam a qualquer sistema operacional onde seja possível executar o JBoss AS.</p>

<h3 id="deploy-do-driver-jdbc-do-mysql">Deploy do driver JDBC do MySQL</h3>

<p>Em primeiro lugar, precisamos do driver JDBC do MySQL. Ele é distribuído como um pacote no site do MySQL (os desenvolvedores do MySQL chamam seu driver JDBC de “MySQL Connector/J”), juntamente com seus código-fonte e documentação.</p>

<p>Entre na <a href="http://www.mysql.com/downloads/connector/j/">página de downloads do MySQL Connector/J</a> e baixe um dos pacotes disponíveis. Para os usuários de Windows, eu recomendo o download do arquivo <strong>.zip</strong>, e para os usuários de Linux, eu recomendo o download do arquivo <strong>.tar.gz</strong>. Descompacte o conteúdo do arquivo baixado para uma pasta de fácil acesso. Para demonstração, utilizarei o Linux, e baixarei o arquivo para minha pasta pessoal (“/home/vinicius/”):</p>

<p>Quando o conteúdo do arquivo é extraído, é criada uma pasta “mysql-connector-java-5.1.21″. Dentro dessa pasta, está o arquivo “mysql-connector-java-5.1.21-bin.jar”. Implante esse arquivo no servidor utilizando o console Web de administração do JBoss AS, exatamente como descrito na <a href="/blog/2012/07/18/apresentando-o-servidor-de-aplicacao-jboss-as-7-parte-2/">segunda parte do post anterior</a>.</p>

<p>Ao final do processo, o driver JDBC do MySQL deve aparecer habilitado na lista de aplicações implantadas, como mostra a figura (curiosamente, a <a href="http://www.jboss.org/jdf/quickstarts/jboss-as-quickstart/helloworld-jsf/">aplicação de exemplo</a> que implantamos <a href="/blog/2012/07/18/apresentando-o-servidor-de-aplicacao-jboss-as-7-parte-2/">naquele post</a> ainda está no servidor):</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2012/07/jboss_as_mysql_02.jpg" title="">
<img src="/files/2012/07/jboss_as_mysql_02.jpg" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<h3 id="criação-do-datasource">Criação do datasource</h3>

<p>No painel superior do console Web, clique em “Profile”, e em seguida, no menu da esquerda, clique em “Datasources”. É exibida uma lista com todos os datasources configurados (nesse caso, só há o <a href="https://docs.jboss.org/author/display/AS7/Getting+Started+Guide#GettingStartedGuide-ModifyingtheExampleDataSource">datasource de exemplo</a>, que já vem configurado com o servidor de aplicação):</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2012/07/jboss_as_mysql_03.jpg" title="">
<img src="/files/2012/07/jboss_as_mysql_03.jpg" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Clique em “Add”. Na caixa de diálogo que aparece, forneça ao datasource um nome (esse nome não afeta a conexão, serve apenas para distinguir o datasource na lista, aqui forneci “TesteDS”) e um nome <a href="http://www.oracle.com/technetwork/java/jndi/">JNDI</a> (esse sim importa à conexão, é usado para localizar um recurso na rede e deve começar sempre com “java:/” ou “java:jboss/”, aqui digitei “java:/teste”), e em seguida clique em “Next”:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2012/07/jboss_as_mysql_04.jpg" title="">
<img src="/files/2012/07/jboss_as_mysql_04.jpg" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Selecione um driver JDBC na lista de drivers disponíveis. No nosso caso, devemos selecionar o MySQL Connector/J. Depois clique em “Next”:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2012/07/jboss_as_mysql_05.jpg" title="">
<img src="/files/2012/07/jboss_as_mysql_05.jpg" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Finalmente, devemos informar os detalhes da conexão: o endereço JDBC de acesso ao banco (aqui, preenchi com “jdbc:mysql://localhost:3306/teste”, o formato desse endereço é “jdbc:mysql://servidor:porta/base”), o usuário e a senha que serão utilizados. Depois de preencher os campos, clique em “Done”:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2012/07/jboss_as_mysql_06.jpg" title="">
<img src="/files/2012/07/jboss_as_mysql_06.jpg" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>O datasource é criado e passa a aparecer na lista, mas ainda não está habilitado:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2012/07/jboss_as_mysql_07.jpg" title="">
<img src="/files/2012/07/jboss_as_mysql_07.jpg" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Antes de habilitá-lo, tornando-o assim disponível para conexão, vamos permitir que esse datasource seja gerenciado pela API de transações do Java (<a href="http://www.oracle.com/technetwork/java/javaee/jta/index.html">Java Transaction API</a>, ou JTA). Selecione-o na lista e, descendo na página, clique na aba “Connection”. Perceba que a JTA está desabilitada para esse datasource. Clique em “Edit” para alterar isso:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2012/07/jboss_as_mysql_08.jpg" title="">
<img src="/files/2012/07/jboss_as_mysql_08.jpg" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Marque as duas últimas opções e clique em “Save”:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2012/07/jboss_as_mysql_09.jpg" title="">
<img src="/files/2012/07/jboss_as_mysql_09.jpg" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Agora a JTA está habilitada:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2012/07/jboss_as_mysql_10.jpg" title="">
<img src="/files/2012/07/jboss_as_mysql_10.jpg" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Agora sim vamos habilitar o datasource: ainda com ele selecionado, clique no botão “Enable”, acima da lista. O datasource é então habilitado:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2012/07/jboss_as_mysql_11.jpg" title="">
<img src="/files/2012/07/jboss_as_mysql_11.jpg" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Ainda com o datasource selecionado na lista e a aba “Connection” aberta na parte de baixo, clique no botão “Test Connection”. Se você forneceu os dados corretamente, o servidor de aplicação conseguirá estabelecer uma conexão com o banco de dados, e a seguinte mensagem será exibida:</p>

<div class="image no-ads-here text-center mb-3" itemscope="" itemtype="http://schema.org/ImageObject">
<a href="/files/2012/07/jboss_as_mysql_12.jpg" title="">
<img src="/files/2012/07/jboss_as_mysql_12.jpg" alt="" class="img-fluid img-thumbnail" itemprop="contentUrl" />
</a>

</div>

<p>Da parte do servidor está tudo OK. Agora é só configurar a aplicação para utilizar o datasource.</p>

<h3 id="configuração-da-aplicação">Configuração da aplicação</h3>

<p>Agora nós precisamos configurar nossa aplicação para se comunicar com a base de dados utilizando o datasource configurado no servidor de aplicação. O arquivo central da configuração da JPA (<a href="http://docs.oracle.com/javaee/6/tutorial/doc/bnbpy.html">Java Persistence API</a>) no projeto, o “META-INF/persistence.xml”, vai sofrer algumas alterações. Observe as linhas destacadas:</p>

<pre><code class="language-xml{6,8}">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;persistence xmlns="http://java.sun.com/xml/ns/persistence"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
   version="2.0"&gt;
   &lt;persistence-unit name="TestePU"&gt;
      &lt;provider&gt;org.hibernate.ejb.HibernatePersistence&lt;/provider&gt;
      &lt;jta-data-source&gt;java:/teste&lt;/jta-data-source&gt;
      &lt;properties&gt;
         &lt;property name="hibernate.hbm2ddl.auto" value="create-drop" /&gt;
         &lt;property name="hibernate.show_sql" value="true" /&gt;
      &lt;/properties&gt;
   &lt;/persistence-unit&gt;
&lt;/persistence&gt;
</code></pre>

<p>Observe que estou utilizando o <a href="http://www.hibernate.org/">Hibernate</a> como implementação JPA, já que estamos utilizando o JBoss AS como servidor de aplicação.</p>

<p>No código-fonte da aplicação, sempre for necessário um <a href="http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html">EntityManager</a> para <a href="http://docs.oracle.com/javaee/6/tutorial/doc/bnbqw.html">manusear entidades JPA</a>, você pode solicitar ao servidor de aplicação que injete-o (isso significa que você não precisa criar o objeto manualmente, o servidor de aplicação cria o objeto para você) anotando sua variável com <a href="http://docs.oracle.com/javaee/6/api/javax/persistence/PersistenceContext.html">@PersistenceContext</a> e especificando o nome da persistence-unit, como definida no arquivo “META-INF/persistence.xml”:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nd">@PersistenceContext</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"TestePU"</span><span class="o">)</span>
<span class="nc">EntityManager</span> <span class="n">entityManager</span><span class="o">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Se sua aplicação possui apenas uma persistence-unit, essa informação pode ser omitida:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nd">@PersistenceContext</span>
<span class="nc">EntityManager</span> <span class="n">entityManager</span><span class="o">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="aplicação-de-exemplo">Aplicação de exemplo</h3>

<p>Uma boa pedida é escolher uma das <a href="http://www.jboss.org/jdf/quickstarts/jboss-as-quickstart/">aplicações de exemplo do JBoss AS</a>, alterar suas configurações e executá-la. No <a href="/blog/2012/07/18/apresentando-o-servidor-de-aplicacao-jboss-as-7/">post anterior</a>, nós compilamos, empacotamos, implantamos e executamos a aplicação de exemplo <a href="http://www.jboss.org/jdf/quickstarts/jboss-as-quickstart/helloworld-jsf/">helloworld-jsf</a>. Vou aproveitar o arquivo que já baixei e extraí naquele post, mas aqui vamos utilizar a aplicação <a href="http://www.jboss.org/jdf/quickstarts/jboss-as-quickstart/greeter/">greeter</a>.</p>

<p>Entre na pasta da aplicação (no meu caso, “/home/vinicius/jboss-jdf-jboss-as-quickstart-8505020/greeter/”), exclua o arquivo “greeter-quickstart-ds.xml” que está na pasta “src/main/webapp/WEB-INF/” e altere o arquivo “persistence.xml” dentro da pasta “src/main/resources/META-INF/” para que tenha o conteúdo acima.</p>

<p>Pronto! Agora é só implantar a aplicação com o <a href="http://maven.apache.org/">Maven</a> (caso você não tenha o Maven em seu computador, leia <a href="http://www.vinyanalista.com.br/blog/2012/07/18/instalacao-do-apache-maven/">esse post</a>):</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>mvn package jboss-as:deploy
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Se tudo ocorrer conforme o esperado, a aplicação de exemplo poderá ser acessada através do endereço “<a href="http://localhost:8080/jboss-as-greeter/">http://localhost:8080/jboss-as-greeter/</a>“.</p>

<h3 id="dica-aos-usuários-de-postgresql">Dica aos usuários de PostgreSQL</h3>

<p>As instruções fornecidas aqui podem ser aplicadas sem maiores problemas a outros bancos de dados. Veja, por exemplo, essa página que ensina <a href="http://blog.xebia.com/2011/07/19/developing-a-jpa-application-on-jboss-as-7/">como configurar um datasource do PostgreSQL no JBoss AS</a>.</p>

<p>Os passos são bastante parecidos, as diferenças ficam por conta do driver JDBC que será implantado (<a href="http://jdbc.postgresql.org/">clique aqui para ir ao site oficial do driver JDBC do PostgreSQL</a>) e do endereço JDBC informado na configuração do datasource (no exemplo desse link, ele informou “jdbc:postgresql://localhost:5432/library”, perceba que é parecido com o endereço que usamos aqui).</p>

<p>Bem, pessoal, vou ficando por aqui, espero que tenham gostado… até a próxima!</p>

        </div>

        
            <!-- AddThis Sharing Buttons -->
            <div class="gap"></div>
            <h2>Gostou? Então compartilha!</h2>
            <div class="addthis_toolbox addthis_default_style addthis_32x32_style">
                <a class="addthis_button_facebook"></a>
                <a class="addthis_button_twitter" data-via="vinyanalista"></a>
                <a class="addthis_button_google_plusone_share"></a>
                <a class="addthis_button_email"></a>
                <a class="addthis_button_favorites"></a>
                <a class="addthis addthis_button_print"></a>
                <a class="addthis_button_pdfonline"></a>
                <a class="addthis_button_compact"></a>
                <a class="addthis_counter addthis_bubble_style"></a>
            </div>
            <!-- AddThis Sharing Buttons End -->
        

        
            <!-- Disqus -->
            <div class="gap"></div>
            <h2>Comentários</h2>
            <div id="disqus_thread"></div>
            <script>
                var disqus_config = function () {
                    this.page.url = 'https://vinyanalista.github.io/blog/2012/07/19/configurando-um-datasource-do-mysql-no-jboss-as/';
                };

                (function() {
                    var d = document, s = d.createElement('script');

                    s.src = '//vinyanalista.disqus.com/embed.js';

                    s.setAttribute('data-timestamp', +new Date());
                    (d.head || d.body).appendChild(s);
                })();
            </script>
            <noscript>
                <p><a href="http://www.enable-javascript.com/pt/" target="_blank">Habilite o JavaScript</a> para ver os <a href="https://disqus.com/?ref_noscript" rel="nofollow">comentários providos pelo Disqus</a>.</p>
            </noscript>
            <!-- Disqus End -->
        
    </article>
</div><!-- .blog-post -->

                    </div>
                    <div class="col-sm-4">
                        <div class="card mb-3">
    <div class="card-header">
        <h3><a name="about"></a><a name="author"></a>Sobre mim</h3>
    </div>
    <div class="card-body" itemprop="author" itemscope itemtype="http://schema.org/Person">
        
            <p class="text-center">
                <a href='https://secure.gravatar.com/avatar/5415f4267b44aa9f51b6f89ac4d1656b' title='Antônio Vinícius'>
                    <img src='https://secure.gravatar.com/avatar/5415f4267b44aa9f51b6f89ac4d1656b' alt='Antônio Vinícius' class='img-fluid img-thumbnail rounded-circle'>
                </a>
            </p>
        
        
            <p class="lead text-center" itemprop="name">
                Antônio Vinícius
            </p>
        
        <link itemprop="url" href="https://vinyanalista.github.io">
        <p>
            Aqui tento compartilhar um pouco das minhas experiências como estudante e profissional de TI :)
        </p>
        <p class='text-center'>
            <a href='http://lattes.cnpq.br/2162371468280338' title='Currículo Lattes' itemprop='sameAs'>
                <img src='/assets/img/curriculo_lattes.png' alt='Currículo Lattes' class='img-fluid lattes'>
            </a>
        </p>
        
            <!-- AddThis Follow Buttons -->
            <div class="addthis_toolbox addthis_32x32_style addthis_default_style addthis_follow_buttons text-center">
                
                    <a href="https://facebook.com/pages/vinyanalistacombr/1604841683119097" class="addthis_button_facebook_follow" addthis:userid="pages/vinyanalistacombr/1604841683119097" itemprop="sameAs"></a>
                
                
                    <a href="https://twitter.com/vinyanalista" class="addthis_button_twitter_follow" addthis:userid="vinyanalista" itemprop="sameAs"></a>
                
                
                
                    <a href="https://www.linkedin.com/in/vinyanalista" class="addthis_button_linkedin_follow" addthis:userid="vinyanalista" itemprop="sameAs"></a>
                
                
                    <a href="https://youtube.com/user/viniciusifse" class="addthis_button_youtube_follow" addthis:userid="viniciusifse" itemprop="sameAs"></a>
                
                
                
                    <a href="https://github.com/vinyanalista" class="addthis_button_github_follow" addthis:userid="vinyanalista" itemprop="sameAs"></a>
                
                <a href="/feed.xml" class="addthis_button_rss_follow"></a>
            </div>
            <!-- AddThis Follow Buttons End -->
        
    </div><!-- .card-body -->
</div><!-- .card -->


    <div class="card mb-3">
        <div class="card-body">
            
    <!-- Google AdSense -->
    <ins class="adsbygoogle" id="sidebar_ad_unit"
        style="display:block"
        data-ad-client="ca-pub-5193467168351289"
        data-ad-slot="4511719452"
        data-ad-format="auto"
        data-full-width-responsive="true"></ins>
    <!-- End Google AdSense -->


        </div><!-- .col-xs-12 -->
    </div><!-- .row -->


                    </div>
                </div>
            </div>

            <footer class="footer">
    <div class="container">
        Copyright &copy; 2021 <a href='#author'>Antônio Vinícius</a>. Todos os direitos reservados. Baseado no <a href='https://github.com/vinyanalista/material-jekyll-plus'>Material site template for Jekyll PLUS</a>.
    </div>
</footer>

<meta itemprop="description" content="O MySQL é um banco de dados de código aberto desenvolvido pela Oracle. Ele se tornou um dos bancos de dados mais utilizados no mundo devido ao fato de se integrar perfeitamente ao PHP, sendo oferecido pela maioria dos serviços de hospedagem de sites em conjunto com o suporte a essa linguagem. Nesse post, você...">


    <div itemprop="image" itemscope itemtype="http://schema.org/ImageObject">
        <meta itemprop="url" content="https://vinyanalista.github.io/files/2012/07/jboss_as_mysql_01.jpg"/>
        <!--<meta itemprop="width" content=""/>--><!-- TODO Image width -->
        <!--<meta itemprop="height" content=""/>--><!-- TODO Image height -->
    </div>



    <meta itemprop="inLanguage" content="pt"/>



    <!-- Disqus -->
    <script id="dsq-count-scr" src="//vinyanalista.disqus.com/count.js" async></script>
    <!-- Disqus End -->



    <!-- Google AdSense -->
    
        
    <!-- Google AdSense -->
    <ins class="adsbygoogle" id="content_ad_unit_2"
        style="display:block"
        data-ad-client="ca-pub-5193467168351289"
        data-ad-slot="7465185857"
        data-ad-format="auto"
        data-full-width-responsive="true"></ins>
    <!-- End Google AdSense -->


    

    <script type="text/javascript">
        adsbygoogle = window.adsbygoogle || [];

        $(document).ready(function(){
            
                var $ad = $('#content_ad_unit_2');
                var $posts = $('.blog-post');
                if (($posts.length > 1) || ($('.blog-archive-title').length > 0)) {
                    // Post listing
                    var post;
                    if ($posts.length > 2) {
                        post = random_number(2, $posts.length);
                    } else {
                        post = 2;
                    }
                    $posts.eq(post - 1).find('.blog-post-content .row').after($ad);
                } else {
                    // Page or post
                    var $paragraphs = $('.blog-post-content p').filter(function() {
                        return ($(this).closest('.no-ads-here').length == 0);
                    });
                    if ($paragraphs.length > 0) {
                        var paragraph;
                        if ($paragraphs.length > 1) {
                            paragraph = random_number(1, $paragraphs.length);
                        } else {
                            paragraph = 1;
                        }
                        $paragraphs.eq(paragraph - 1).after($ad);
                    } else {
                        $ad.remove();
                    }
                }
            
            $('.adsbygoogle').each(function(index, element){
                adsbygoogle.push({});
            });
        });
    </script>
    <!-- Google AdSense End -->



            
        </main>
    </div><!-- .bmd-layout-container -->
</body>
</html>
